<!DOCTYPE html>
<html>
  <head>
    <script>
      (function(){
  const {protocol:proto, host:hostName, pathname:path, search:srch, hash:hsh} = window.location;
  if (!(path.endsWith("/") || path.endsWith(".html"))) {
    window.location.replace(`${proto}//${hostName}${path}/${srch}${hsh}`);
  }
})()</script>
    <base href="./../../"><meta charset="utf-8">
    <meta name="viewport" content="height=device-height, width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <title>Tasks and Threads</title><link rel="stylesheet" href="book.css">
    <script>
      const __versoSiteRoot = document.baseURI;</script>
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js" integrity="sha384-zbcZAIxlvJtNE3Dp5nxLXdXtXyxwOdnILY1TDPVmKFhl4r4nSUG1r8bcFXGVa4Te" crossorigin="anonymous"></script>
    <script src="static/katex/katex.min.js"></script>
    <script src="static/math.js"></script>
    <script src="static/search/fuzzysort.js"></script>
    <script src="static/print.js"></script>
    <script src="-verso-js/popper.js"></script>
    <script src="-verso-js/tippy.js"></script>
    <link rel="stylesheet" href="static/katex/katex.min.css">
    <link rel="stylesheet" href="static/colors.css">
    <link rel="stylesheet" href="static/theme.css">
    <link rel="stylesheet" href="static/print.css">
    <link rel="stylesheet" href="static/search/search-box.css">
    <link rel="stylesheet" href="static/fonts/source-serif/source-serif-text.css">
    <link rel="stylesheet" href="static/fonts/source-code-pro/source-code-pro.css">
    <link rel="stylesheet" href="static/fonts/source-sans/source-sans-3.css">
    <link rel="stylesheet" href="static/fonts/noto-sans-mono/noto-sans-mono.css">
    <link rel="stylesheet" href="-verso-css/tippy-border.css">
    <style>
a.elan-command {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.elan-command:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
a.lake-command {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.lake-command:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
span.TODO {
  border: 3px solid red;
  display: inline;
  position: relative;
  float: right;
  clear: right;
  margin-top: 1rem;
  width: 15vw;
  margin-right: -17vw;
  color: red;
  font-size: large;
  font-weight: bold;
}
</style><style>
.hl.lean.tactic-view {
  white-space: collapse;
}
.hl.lean.tactic-view .tactic-state {
  display: block;
  left: 0;
  padding: 0;
  border: none;
}
.hl.lean.tactic-view .tactic-state .goal {
  margin-top: 1em;
  margin-bottom: 1em;
  display: block;
}
.hl.lean.tactic-view .tactic-state .goal:first-child {
  margin-top: 0.25em;
}
.hl.lean.tactic-view .tactic-state .goal:last-child {
  margin-bottom: 0.25em;
}


</style><style>
.namedocs .title {
  font-family: var(--verso-structure-font-family);
  font-size: 1.1rem;
  margin-top: 0;
  margin-left: 1rem;
  margin-right: 1.5rem;
  margin-bottom: 0.75rem;
  display: inline-block;
}
</style><style>
.marginalia .note {
  position: relative;
  padding: 0.5rem;
}

/* Wide viewport */
@media screen and (min-width: 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    margin-right: -16rem;
    width: 13rem;
    margin-top: 1rem;
  }
}

/* Very wide viewport */
@media screen and (min-width: 1600px) {
  .marginalia .note {
    margin-right: -19vw;
    width: 15vw;
  }
}

.marginalia:hover, .marginalia:hover .note, .marginalia:has(.note:hover) {
  background-color: var(--lean-accent-light-blue);
}

/* Medium viewport */
@media screen and (700px < width <= 1400px) {
  .marginalia .note {
    float: right;
    clear: right;
    width: 40%;
    margin: 1rem 0;
    margin-left: 10%;
  }
}

/* Narrow viewport (e.g. phone) */
@media screen and (width <= 700px) {
  .marginalia .note {
    float: left;
    clear: left;
    width: 90%;
    margin: 1rem 5%;
  }
}

body {
  counter-reset: margin-note-counter;
}
.marginalia .note {
  counter-increment: margin-note-counter;
}
.marginalia .note::before {
  content: counter(margin-note-counter) ".";
  position: absolute;
  vertical-align: baseline;
  font-size: 0.9em;
  font-weight: bold;
  left: -3rem;
  width: 3rem;
  text-align: right;
}
.marginalia::after {
  content: counter(margin-note-counter);
  vertical-align: super;
  font-size: 0.7em;
  font-weight: bold;
  margin-right: 0.5em;
}
</style><style>
.namedocs {
  position: relative;
  border: solid 1px #98B2C0;
  border-radius: .5rem;
  padding-top: var(--verso--box-padding);
  margin-top: var(--verso--box-vertical-margin);
  margin-bottom: var(--verso--box-vertical-margin);
}

.namedocs .text {
  /* Causes margins on child elements to collapse inside the element, such
     that the margins don't extend into parent with the background color.
     The effect is that weird borders in the definition box don't happen anymore. */
  display: flow-root;
  /* Add a padding. this is the same as the margin applied to the first and last child.
     The effect is that the padding looks the same size on all sides. */
  padding: 0 var(--verso--box-padding);
  border-top: 1px solid #98B2C0;
}

.namedocs .text > pre {
  overflow-x: auto;
}

.namedocs .signature {
  font-family: var(--verso-code-font-family);
  margin-top: 0 !important;
  margin-left: var(--verso--box-padding) !important;
  margin-bottom: .75rem !important;
}

.namedocs .label {
  display: block;
  font-size: small;
  font-family: var(--verso-structure-font-family);
  position: absolute;
  top: -0.65rem;
  left: 1rem;
  background: #fff;
  padding: 0 .5rem .125rem;
  border: 1px solid #98B2C0;
  border-radius: 1rem;
  color: #555;
}

.namedocs h1 {
  font-size: inherit;
  font-weight: bold
  margin-top: 1rem;
  margin-bottom: 1rem;
}

.namedocs > .text .constructor {
  padding-top: 0;
  padding-right: 0;
  padding-bottom: 0;
  margin-top: 0.5rem;
  margin-bottom: 1.5rem;
}

.namedocs > .text .constructor::before {
  content: '| ';
  display: block;
  font-family: var(--verso-code-font-family);
  font-weight: bold;
  float: left;
  width: 0.5rem;
  white-space: pre;
}

.namedocs > .text .constructor .name-and-type {
  padding-left: 0.5rem;
  float: left;
  margin-top: 0;
  max-width: calc(100% - 1rem);
}
.namedocs > .text .constructor .docs {
  clear: both;
  padding-left: 1rem;
}

/* These margins work together with the padding on .text */
.namedocs .text > :first-child {
  margin-top: var(--verso--box-padding);
}
.namedocs .text > :last-child {
  margin-bottom: var(--verso--box-padding);
}

.namedocs .methods td, .namedocs .fields td {
  vertical-align: top;
}
.namedocs .inheritance {
  vertical-align: top;
  font-size: smaller;
  font-family: var(--verso-structure-font-family);
}
.namedocs .inheritance ol {
  display: inline-block;
  margin: 0;
  padding: 0;
}
.namedocs .inheritance ol li {
  list-style-type: none;
  display: inline-block;
}
.namedocs .inheritance ol li::after {
  content: " > "
}
.namedocs .inheritance ol li:last-child::after {
  content: "";
}

.namedocs .extends {
  display: inline;
  margin: 0;
  padding: 0;
}

.namedocs .extends li {
  list-style-type: none;
  display: inline-block;
}

.namedocs .extends li label {
  padding-right: 1rem;
}

.namedocs .subdocs .name-and-type {
  font-size: 1rem;
  margin-left: 0;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs .subdocs .docs {
  margin-left: 1.5rem;
  margin-top: 0;
  margin-right: 0;
  margin-bottom: 0.5rem;
}

.namedocs:has(input[data-parent-idx]) [data-inherited-from] {
  transition-property: opacity, display;
  transition-duration: 0.4s;
  transition-behavior: allow-discrete;
  @starting-style { opacity: 0 !important; }
}

#this-page-items .tactic-name { font-weight: bold; }
.namedocs:has(input[data-parent-idx="0"]) [data-inherited-from="0"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="0"]:checked) [data-inherited-from="0"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="0"]:checked):has(.inheritance[data-inherited-from="0"]:hover) [data-inherited-from]:not([data-inherited-from="0"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="1"]) [data-inherited-from="1"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="1"]:checked) [data-inherited-from="1"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="1"]:checked):has(.inheritance[data-inherited-from="1"]:hover) [data-inherited-from]:not([data-inherited-from="1"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="2"]) [data-inherited-from="2"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="2"]:checked) [data-inherited-from="2"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="2"]:checked):has(.inheritance[data-inherited-from="2"]:hover) [data-inherited-from]:not([data-inherited-from="2"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="3"]) [data-inherited-from="3"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="3"]:checked) [data-inherited-from="3"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="3"]:checked):has(.inheritance[data-inherited-from="3"]:hover) [data-inherited-from]:not([data-inherited-from="3"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="4"]) [data-inherited-from="4"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="4"]:checked) [data-inherited-from="4"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="4"]:checked):has(.inheritance[data-inherited-from="4"]:hover) [data-inherited-from]:not([data-inherited-from="4"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="5"]) [data-inherited-from="5"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="5"]:checked) [data-inherited-from="5"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="5"]:checked):has(.inheritance[data-inherited-from="5"]:hover) [data-inherited-from]:not([data-inherited-from="5"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="6"]) [data-inherited-from="6"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="6"]:checked) [data-inherited-from="6"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="6"]:checked):has(.inheritance[data-inherited-from="6"]:hover) [data-inherited-from]:not([data-inherited-from="6"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="7"]) [data-inherited-from="7"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="7"]:checked) [data-inherited-from="7"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="7"]:checked):has(.inheritance[data-inherited-from="7"]:hover) [data-inherited-from]:not([data-inherited-from="7"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="8"]) [data-inherited-from="8"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="8"]:checked) [data-inherited-from="8"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="8"]:checked):has(.inheritance[data-inherited-from="8"]:hover) [data-inherited-from]:not([data-inherited-from="8"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="9"]) [data-inherited-from="9"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="9"]:checked) [data-inherited-from="9"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="9"]:checked):has(.inheritance[data-inherited-from="9"]:hover) [data-inherited-from]:not([data-inherited-from="9"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="10"]) [data-inherited-from="10"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="10"]:checked) [data-inherited-from="10"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="10"]:checked):has(.inheritance[data-inherited-from="10"]:hover) [data-inherited-from]:not([data-inherited-from="10"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="11"]) [data-inherited-from="11"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="11"]:checked) [data-inherited-from="11"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="11"]:checked):has(.inheritance[data-inherited-from="11"]:hover) [data-inherited-from]:not([data-inherited-from="11"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="12"]) [data-inherited-from="12"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="12"]:checked) [data-inherited-from="12"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="12"]:checked):has(.inheritance[data-inherited-from="12"]:hover) [data-inherited-from]:not([data-inherited-from="12"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="13"]) [data-inherited-from="13"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="13"]:checked) [data-inherited-from="13"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="13"]:checked):has(.inheritance[data-inherited-from="13"]:hover) [data-inherited-from]:not([data-inherited-from="13"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="14"]) [data-inherited-from="14"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="14"]:checked) [data-inherited-from="14"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="14"]:checked):has(.inheritance[data-inherited-from="14"]:hover) [data-inherited-from]:not([data-inherited-from="14"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="15"]) [data-inherited-from="15"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="15"]:checked) [data-inherited-from="15"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="15"]:checked):has(.inheritance[data-inherited-from="15"]:hover) [data-inherited-from]:not([data-inherited-from="15"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="16"]) [data-inherited-from="16"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="16"]:checked) [data-inherited-from="16"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="16"]:checked):has(.inheritance[data-inherited-from="16"]:hover) [data-inherited-from]:not([data-inherited-from="16"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="17"]) [data-inherited-from="17"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="17"]:checked) [data-inherited-from="17"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="17"]:checked):has(.inheritance[data-inherited-from="17"]:hover) [data-inherited-from]:not([data-inherited-from="17"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="18"]) [data-inherited-from="18"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="18"]:checked) [data-inherited-from="18"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="18"]:checked):has(.inheritance[data-inherited-from="18"]:hover) [data-inherited-from]:not([data-inherited-from="18"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="19"]) [data-inherited-from="19"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="19"]:checked) [data-inherited-from="19"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="19"]:checked):has(.inheritance[data-inherited-from="19"]:hover) [data-inherited-from]:not([data-inherited-from="19"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="20"]) [data-inherited-from="20"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="20"]:checked) [data-inherited-from="20"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="20"]:checked):has(.inheritance[data-inherited-from="20"]:hover) [data-inherited-from]:not([data-inherited-from="20"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="21"]) [data-inherited-from="21"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="21"]:checked) [data-inherited-from="21"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="21"]:checked):has(.inheritance[data-inherited-from="21"]:hover) [data-inherited-from]:not([data-inherited-from="21"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="22"]) [data-inherited-from="22"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="22"]:checked) [data-inherited-from="22"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="22"]:checked):has(.inheritance[data-inherited-from="22"]:hover) [data-inherited-from]:not([data-inherited-from="22"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="23"]) [data-inherited-from="23"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="23"]:checked) [data-inherited-from="23"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="23"]:checked):has(.inheritance[data-inherited-from="23"]:hover) [data-inherited-from]:not([data-inherited-from="23"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="24"]) [data-inherited-from="24"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="24"]:checked) [data-inherited-from="24"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="24"]:checked):has(.inheritance[data-inherited-from="24"]:hover) [data-inherited-from]:not([data-inherited-from="24"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="25"]) [data-inherited-from="25"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="25"]:checked) [data-inherited-from="25"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="25"]:checked):has(.inheritance[data-inherited-from="25"]:hover) [data-inherited-from]:not([data-inherited-from="25"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="26"]) [data-inherited-from="26"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="26"]:checked) [data-inherited-from="26"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="26"]:checked):has(.inheritance[data-inherited-from="26"]:hover) [data-inherited-from]:not([data-inherited-from="26"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="27"]) [data-inherited-from="27"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="27"]:checked) [data-inherited-from="27"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="27"]:checked):has(.inheritance[data-inherited-from="27"]:hover) [data-inherited-from]:not([data-inherited-from="27"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="28"]) [data-inherited-from="28"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="28"]:checked) [data-inherited-from="28"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="28"]:checked):has(.inheritance[data-inherited-from="28"]:hover) [data-inherited-from]:not([data-inherited-from="28"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="29"]) [data-inherited-from="29"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="29"]:checked) [data-inherited-from="29"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="29"]:checked):has(.inheritance[data-inherited-from="29"]:hover) [data-inherited-from]:not([data-inherited-from="29"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="30"]) [data-inherited-from="30"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="30"]:checked) [data-inherited-from="30"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="30"]:checked):has(.inheritance[data-inherited-from="30"]:hover) [data-inherited-from]:not([data-inherited-from="30"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="31"]) [data-inherited-from="31"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="31"]:checked) [data-inherited-from="31"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="31"]:checked):has(.inheritance[data-inherited-from="31"]:hover) [data-inherited-from]:not([data-inherited-from="31"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="32"]) [data-inherited-from="32"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="32"]:checked) [data-inherited-from="32"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="32"]:checked):has(.inheritance[data-inherited-from="32"]:hover) [data-inherited-from]:not([data-inherited-from="32"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="33"]) [data-inherited-from="33"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="33"]:checked) [data-inherited-from="33"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="33"]:checked):has(.inheritance[data-inherited-from="33"]:hover) [data-inherited-from]:not([data-inherited-from="33"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="34"]) [data-inherited-from="34"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="34"]:checked) [data-inherited-from="34"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="34"]:checked):has(.inheritance[data-inherited-from="34"]:hover) [data-inherited-from]:not([data-inherited-from="34"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="35"]) [data-inherited-from="35"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="35"]:checked) [data-inherited-from="35"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="35"]:checked):has(.inheritance[data-inherited-from="35"]:hover) [data-inherited-from]:not([data-inherited-from="35"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="36"]) [data-inherited-from="36"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="36"]:checked) [data-inherited-from="36"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="36"]:checked):has(.inheritance[data-inherited-from="36"]:hover) [data-inherited-from]:not([data-inherited-from="36"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="37"]) [data-inherited-from="37"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="37"]:checked) [data-inherited-from="37"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="37"]:checked):has(.inheritance[data-inherited-from="37"]:hover) [data-inherited-from]:not([data-inherited-from="37"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="38"]) [data-inherited-from="38"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="38"]:checked) [data-inherited-from="38"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="38"]:checked):has(.inheritance[data-inherited-from="38"]:hover) [data-inherited-from]:not([data-inherited-from="38"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="39"]) [data-inherited-from="39"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="39"]:checked) [data-inherited-from="39"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="39"]:checked):has(.inheritance[data-inherited-from="39"]:hover) [data-inherited-from]:not([data-inherited-from="39"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="40"]) [data-inherited-from="40"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="40"]:checked) [data-inherited-from="40"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="40"]:checked):has(.inheritance[data-inherited-from="40"]:hover) [data-inherited-from]:not([data-inherited-from="40"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="41"]) [data-inherited-from="41"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="41"]:checked) [data-inherited-from="41"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="41"]:checked):has(.inheritance[data-inherited-from="41"]:hover) [data-inherited-from]:not([data-inherited-from="41"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="42"]) [data-inherited-from="42"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="42"]:checked) [data-inherited-from="42"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="42"]:checked):has(.inheritance[data-inherited-from="42"]:hover) [data-inherited-from]:not([data-inherited-from="42"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="43"]) [data-inherited-from="43"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="43"]:checked) [data-inherited-from="43"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="43"]:checked):has(.inheritance[data-inherited-from="43"]:hover) [data-inherited-from]:not([data-inherited-from="43"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="44"]) [data-inherited-from="44"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="44"]:checked) [data-inherited-from="44"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="44"]:checked):has(.inheritance[data-inherited-from="44"]:hover) [data-inherited-from]:not([data-inherited-from="44"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="45"]) [data-inherited-from="45"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="45"]:checked) [data-inherited-from="45"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="45"]:checked):has(.inheritance[data-inherited-from="45"]:hover) [data-inherited-from]:not([data-inherited-from="45"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="46"]) [data-inherited-from="46"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="46"]:checked) [data-inherited-from="46"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="46"]:checked):has(.inheritance[data-inherited-from="46"]:hover) [data-inherited-from]:not([data-inherited-from="46"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="47"]) [data-inherited-from="47"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="47"]:checked) [data-inherited-from="47"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="47"]:checked):has(.inheritance[data-inherited-from="47"]:hover) [data-inherited-from]:not([data-inherited-from="47"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="48"]) [data-inherited-from="48"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="48"]:checked) [data-inherited-from="48"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="48"]:checked):has(.inheritance[data-inherited-from="48"]:hover) [data-inherited-from]:not([data-inherited-from="48"]) {
  opacity: 0.5;
}
.namedocs:has(input[data-parent-idx="49"]) [data-inherited-from="49"] {
  display: none;
  opacity: 0;
}
.namedocs:has(input[data-parent-idx="49"]:checked) [data-inherited-from="49"] {
  display: block;
  transform: none;
  opacity: 1;
}
.namedocs:has(input[data-parent-idx="49"]:checked):has(.inheritance[data-inherited-from="49"]:hover) [data-inherited-from]:not([data-inherited-from="49"]) {
  opacity: 0.5;
}
</style><style>
.field-category > :first-child {
}

.field-category > :not(:first-child) {
  margin-left: 1rem;
}
</style><style>
a.technical-term {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
a.technical-term:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>
dl.toml-table-field-spec {
}
</style><style>
.example-file {
  white-space: normal;
  font-family: var(--verso-structure-font-family);
  margin: 1rem;
  width: fit-content;
  border: 1px solid #ddd;
  padding: 0.5rem;

  /* These are necessary for the container to behave nicely on mobile */
  overflow-x: auto;
  max-width: 100%;
  box-sizing: border-box;
}
.example-file::before {
  counter-reset: linenumber;
}
.example-file > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.example-file > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
.example-file > .line::after {
  -webkit-user-select: none;
  display: inline-block;
  content: "⏎";
  opacity: 0;
}
.example-file > .line:hover::after {
  opacity: 1;
}
.example-file > .line:hover, .example-file > .line:hover::before {
  background-color: #eee;
}
.example-file > .empty {
  display: block;
  white-space: pre;
  font-family: var(--verso-code-font-family);
  font-style: italic;
}
.example-file > .empty::before {
  -webkit-user-select: none;
  display: inline-block;
  content: "";
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}
</style><style>.keyword-of .kw {
  font-weight: 500;
}
.keyword-of .hover-info {
  display: none;
}
.keyword-of .kw:hover {
  background-color: #eee;
  border-radius: 2px;
}
</style><style>.grammar .keyword {
  font-weight: 500 !important;
}

.grammar {
  padding-top: 0.25rem;
  padding-bottom: 0.25rem;
}

.grammar .comment {
  font-style: italic;
  font-family: var(--verso-text-font-family);
  /* TODO add background and text colors to Verso theme, then compute a background here */
  background-color: #fafafa;
  border: 1px solid #f0f0f0;
}

.grammar .local-name {
  font-family: var(--verso-code-font-family);
  font-style: italic;
}

.grammar .nonterminal {
  font-style: italic;
}
.grammar .nonterminal > .hover-info, .grammar .from-nonterminal > .hover-info, .grammar .local-name > .hover-info {
  display: none;
}
.grammar .active {
  background-color: #eee;
  border-radius: 2px;
}
.grammar a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
</style><style>
.c .type { font-weight: 600; }
.c .kw { font-weight: 600; }
.c .comment { font-style: italic; }
</style><style>.namedocs .label a { color: inherit; }</style><style>#toc .split-toc > ol .syntax .keyword { font-family: var(--verso-code-font-family); font-weight: 600; }</style><style>

.hl.lean {
  white-space: pre;
  font-weight: normal;
  font-style: normal;
}

.hl.lean .keyword {
  font-weight : bold;
}

.hl.lean .var {
  font-style: italic;
  position: relative;
}

.hover-container {
  width: 0;
  height: 0;
  position: relative;
  display: inline;
}

.hl.lean a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}

.hl.lean a:hover {
  text-decoration: currentcolor underline solid;
}

.hl.lean .hover-info {
  white-space: normal;
}

.hl.lean .token .hover-info {
  display: none;
  position: absolute;
  background-color: #e5e5e5;
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 300;
  font-size: inherit;
}

.hl.lean .hover-info.messages {
  max-height: 10rem;
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-gutter: stable;
  padding: 0 0.5rem 0 0;
  display: block;
}

.hl.lean .hover-info code {
  white-space: pre-wrap;
}

.hl.lean .hover-info.messages > code {
  padding: 0.5rem;
  display: block;
  width: fit-content;
}

.hl.lean .hover-info.messages > code:only-child {
  margin: 0;
}

.hl.lean .hover-info.messages > code {
  margin: 0.1rem;
}

.hl.lean .hover-info.messages > code:not(:first-child) {
  margin-top: 0rem;
}

/*
@media (hover: hover) {
  .hl.lean .has-info:hover > .hover-container > .hover-info:not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .has-info:hover > .hover-container > .hover-info,
  .hl.lean .token:hover > .hover-container > .hover-info:not(.has-info *):not(.tactic *),
  .hl.lean .tactic:has(> .tactic-toggle:checked) .token:hover > .hover-container > .hover-info:not(.has-info *) {
    display: inline-block;
    position: absolute;
    top: 1rem;
    font-weight: normal;
    font-style: normal;
    width: min-content;
  }
}
*/

.hl.lean.block {
  display: block;
}

.hl.lean.inline {
  display: inline;
  white-space: pre-wrap;
}

.hl.lean .token {
  transition: all 0.25s; /* Slight fade for highlights */
}

@media (hover: hover) {
  .hl.lean .token.binding-hl, .hl.lean .literal.string:hover, .hl.lean .token.typed:hover {
    background-color: #eee;
    border-radius: 2px;
    transition: none;
  }
}


.hl.lean .has-info {
  text-decoration-style: wavy;
  text-decoration-line: underline;
  text-decoration-thickness: from-font;
}

.hl.lean .has-info .hover-info {
  display: none;
  position: absolute;
  transform: translate(0.25rem, 0.3rem);
  border: 1px solid black;
  padding: 0.5rem;
  z-index: 400;
  text-align: left;
}

.hl.lean .has-info.error {
  text-decoration-color: red;
}

@media (hover: hover) {
  .hl.lean .has-info.error:hover {
    background-color: #ffb3b3;
  }
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #ffb3b3;
}

.tippy-box[data-theme~='error'] .hl.lean .hover-info.messages > code.error {
  background: none;
  border: none;
}

.error pre {
    color: red;
}

.hl.lean .has-info.warning {
  text-decoration-color: var(--verso-warning-color);
}

@media (hover: hover) {
  .hl.lean .has-info.warning:hover {
    background-color:var(--verso-warning-color);
  }
}

.hl.lean .hover-info.messages > code.warning {
  background-color: var(--verso-warning-color);
}

.hl.lean .hover-info.messages > code.error {
  background-color: #e5e5e5;
  border-left: 0.2rem solid var(--verso-warning-color);
}

.tippy-box[data-theme~='warning'] .hl.lean .hover-info.messages > code.warning {
  background: none;
  border: none;
}


.hl.lean .has-info.info {
  text-decoration-color: blue;
}

@media (hover: hover) {
  .hl.lean .has-info.info:hover {
    background-color: #4777ff;
  }
}


.hl.lean .hover-info.messages > code.info {
  background-color: #e5e5e5;
  border-left: 0.2rem solid #4777ff;
}

.tippy-box[data-theme~='info'] .hl.lean .hover-info.messages > code.info {
  background: none;
  border: none;
}

.hl.lean div.docstring {
  font-family: sans-serif;
  white-space: normal;
  max-width: 40rem;
  width: max-content;
}

.hl.lean div.docstring > :last-child {
  margin-bottom: 0;
}

.hl.lean div.docstring > :first-child {
  margin-top: 0;
}

.hl.lean .hover-info .sep {
  display: block;
  width: auto;
  margin-left: 1rem;
  margin-right: 1rem;
  margin-top: 0.5rem;
  margin-bottom: 0.5rem;
  padding: 0;
  height: 1px;
  border-top: 1px solid #ccc;
}

.hl.lean code {
  font-family: monospace;
}

.hl.lean .tactic-state {
  display: none;
  position: relative;
  left: 2rem;
  width: fit-content;
  border: 1px solid #888888;
  border-radius: 0.1rem;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
  z-index: 200;
}

.hl.lean.popup .tactic-state {
  position: static;
  display: block;
  width: auto;
  border: none;
  padding: 0.5rem;
  font-family: sans-serif;
  background-color: #ffffff;
}


.hl.lean .tactic {
  position: relative;
}

.hl.lean .tactic-toggle:checked ~ .tactic-state {
  display: block;
}

/*
@media (hover: hover) {
  .hl.lean .tactic:hover > .tactic-toggle:not(:checked) ~ .tactic-state {
    display: block;
    position: absolute;
    left: 0;
    transform: translate(0.25rem, 0);
    z-index: 250;
  }
}
*/

.hl.lean .tactic > label {
  position: relative;
  transition: all 0.5s;
}

@media (hover: hover) {
  .hl.lean .tactic > label:hover {
    border-bottom: 1px dotted #bbbbbb;
  }
}

.hl.lean .tactic-toggle {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .tactic > label::after {
  content: "";
  border: 1px solid #bbbbbb;
  border-radius: 1rem;
  height: 0.25rem;
  vertical-align: middle;
  width: 0.6rem;
  margin-left: 0.1rem;
  margin-right: 0.1rem;
  display: inline-block;
  transition: all 0.5s;
}

/*
@media (hover: hover) {
  .hl.lean .tactic > label:hover::after {
    border: 1px solid #aaaaaa;
    background-color: #aaaaaa;
    transition: all 0.5s;
  }
}
*/

.hl.lean .tactic > label:has(+ .tactic-toggle:checked)::after {
  border: 1px solid #999999;
  background-color: #999999;
  transition: all 0.5s;
}

.hl.lean .tactic-state .goal + .goal {
  margin-top: 1.5rem;
}

.hl.lean .tactic-state summary {
  margin-left: -0.5rem;
}

.hl.lean .tactic-state details {
  padding-left: 0.5rem;
}

.hl.lean .case-label {
  display: block;
  position: relative;
}

.hl.lean .case-label input[type="checkbox"] {
  position: absolute;
  top: 0;
  left: 0;
  opacity: 0;
  height: 0;
  width: 0;
  z-index: -10;
}

.hl.lean .case-label:has(input[type="checkbox"])::before {
  width: 1rem;
  height: 1rem;
  display: inline-block;
  background-color: black;
  content: ' ';
  transition: ease 0.2s;
  margin-right: 0.7rem;
  clip-path: polygon(100% 0, 0 0, 50% 100%);
  width: 0.6rem;
  height: 0.6rem;
}

.hl.lean .case-label:has(input[type="checkbox"]:not(:checked))::before {
  transform: rotate(-90deg);
}

.hl.lean .case-label:has(input[type="checkbox"]) {

}

.hl.lean .case-label:has(input[type="checkbox"]:checked) {

}


.hl.lean .tactic-state .labeled-case > :not(:first-child) {
  max-height: 0px;
  display: block;
  overflow: hidden;
  transition: max-height 0.1s ease-in;
  margin-left: 0.5rem;
  margin-top: 0.1rem;
}

.hl.lean .labeled-case:has(.case-label input[type="checkbox"]:checked) > :not(:first-child) {
  max-height: 100%;
}


.hl.lean .tactic-state .goal-name::before {
  font-style: normal;
  content: "case ";
}

.hl.lean .tactic-state .goal-name {
  font-style: italic;
  font-family: monospace;
}

.hl.lean .tactic-state .hypotheses {
  display: table;
}

.hl.lean .tactic-state .hypothesis {
  display: table-row;
}

.hl.lean .tactic-state .hypothesis > * {
  display: table-cell;
}


.hl.lean .tactic-state .hypotheses .colon {
  text-align: center;
  min-width: 1rem;
}

.hl.lean .tactic-state .hypotheses .name {
  text-align: right;
}

.hl.lean .tactic-state .hypotheses .name,
.hl.lean .tactic-state .hypotheses .type,
.hl.lean .tactic-state .conclusion .type {
  font-family: monospace;
}

.tippy-box[data-theme~='lean'] {
  background-color: #e5e5e5;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='lean'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
}
.tippy-box[data-theme~='lean'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
}

.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: #e5e5e5;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='top'] > .tippy-arrow::after {
  bottom: -11px;
  border-width: 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::before {
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='bottom'] > .tippy-arrow::after {
  top: -11px;
  border-width: 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: #e5e5e5;
  border-width: 11px 0 11px 11px;
}
.tippy-box[data-theme~='message'][data-placement^='left'] > .tippy-arrow::after {
  right: -11px;
  border-width: 11px 0 11px 11px;
}

.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: #e5e5e5;
  border-width: 11px 11px 11px 0;
}
.tippy-box[data-theme~='message'][data-placement^='right'] > .tippy-arrow::after {
  left: -11px;
  border-width: 11px 11px 11px 0;
}



.tippy-box[data-theme~='warning'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid var(--verso-warning-color);
}

.tippy-box[data-theme~='error'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #f7a7af;
}

.tippy-box[data-theme~='info'] {
  background-color: #e5e5e5;
  color: black;
  border: 3px solid #99b3c2;
}



.tippy-box[data-theme~='tactic'] {
  background-color: white;
  color: black;
  border: 1px solid black;
}
.tippy-box[data-theme~='tactic'][data-placement^='top'] > .tippy-arrow::before {
  border-top-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='bottom'] > .tippy-arrow::before {
  border-bottom-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='left'] > .tippy-arrow::before {
  border-left-color: white;
}
.tippy-box[data-theme~='tactic'][data-placement^='right'] > .tippy-arrow::before {
  border-right-color: white;
}

</style><style>
table.tabular {
  margin: auto;
  border-spacing: 1rem;
}
table.tabular.left-align {
  margin-right: auto;
  margin-left: 0;
}
table.tabular.center-align {
  margin: auto;
}
table.tabular.right-align {
  margin-left auto;
  margin-right: 0;
}
table.tabular td, table.tabular th {
  text-align: left;
  vertical-align: top;
}
table.tabular td > p:first-child, table.tabular th > p:first-child {
  margin-top: 0;
}
table.tabular td > p:last-child, table.tabular th > p:first-child {
  margin-bottom: 0;
}
</style><style>
.lake-opt a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.lake-opt a:hover {
  text-decoration: currentcolor underline solid;
}
</style><style>
div.TODO {
  border: 5px solid red;
  position: relative;
}
div.TODO::before {
  content: "TODO";
  position: absolute;
  top: 0;
  right: 0;
  color: red;
  font-size: large;
  font-weight: bold;
  transform: rotate(-90deg) translate(-2em);
}
</style><style>
.toml {
  font-family: var(--verso-code-font-family);
}

pre.toml {
  margin: 0.5rem .75rem;
  padding: 0.1rem 0;
}

.toml .bool, .toml .table-header {
    font-weight: 600;
}

.toml .table-header .key {
    color: #3030c0;
}

.toml .bool {
    color: #107090;
}

.toml .string {
    color: #0a5020;
}

.toml a, .toml a:link {
    color: inherit;
    text-decoration: none;
    border-bottom: 1px dotted #a2a2a2;
}

.toml a:hover {
    border-bottom-style: solid;
}
</style><style>
    main .theIndex {
      padding-left: 0;
      font-family: var(--verso-text-font-family);
    }

    main .theIndex nav {
      position: sticky;
      top: var(--verso-header-height);
      background: white;
      font-family: var(--verso-structure-font-family);
    }

    main .theIndex [id] {
      /* This needs the combined height of the index header and the page header. We
         know the height of the page header, but the index header height varies, so
         we use the maximum height it gets which also works well for readers with
         wide screens */
      scroll-margin-top: calc(var(--verso-header-height) + 7.5rem);
    }

    @media screen and (max-width: 700px) {
      /* On mobile, the sticky index takes up half the screen. */
      main .theIndex nav {
        position: static;
      }

      main .theIndex [id] {
        /* On mobile, the index header is not sticky, so we just need to
        be below the page header. */
        scroll-margin-top: var(--verso-header-height);
      }
    }

    main .theIndex nav ol {
      padding: 0;
    }

    main .theIndex nav ol li {
      display: inline-block;
    }

    main .theIndex nav ol li a {
      /* Padding instead of margin to have a bigger click target */
      padding-left: 0.5rem;
      padding-right: 0.5rem;
    }
    /* Increase the size of the touch target on phones */
    @media screen and (max-width: 700px) {
      main .theIndex nav ol li a {
        padding-left: 0.75rem;
        padding-right: 0.75rem;
      }
    }

    main .theIndex nav ol li:first-child a {
      padding-left: 0;
    }

    main .theIndex nav ol li + li:before {
      content: "|";
    }

    main .theIndex h1,
    main .theIndex h2,
    main .theIndex h3,
    main .theIndex h4,
    main .theIndex h5,
    main .theIndex h6 {
      margin-top: 0;
    }

    main .theIndex ol {
      list-style-type: none;
    }

    main .theIndex .division > ol {
      padding-left: 0;
      display: flex;
      flex-direction: column;
      gap: .5rem;
      overflow-wrap: break-word;
    }

   main .theIndex .division > ol > li {
      margin-bottom: 0.5rem;
    }

    main .theIndex .division ol ol {
      padding-left: 1rem;
    }

    main .theIndex .division {
      break-inside: avoid;
      counter-reset: none;
      max-width: none;
      width: auto;
    }
    </style><style>
.toml-field a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.toml-field a:hover {
  text-decoration: currentcolor underline solid;
}
</style><style>
.env-var a {
  color: inherit;
  text-decoration: currentcolor underline dotted;
}
.env-var a:hover {
  text-decoration: currentcolor underline solid;
}

</style><style>.plain-keyword {
  font-weight: 500;
}
</style><style>.example {
  border: 1px solid #98B2C0;
  border-radius: 0.5rem;
  margin-bottom: var(--verso--box-vertical-margin);
  margin-top: var(--verso--box-vertical-margin);
}
/* 1400 px is the cutoff for when the margin notes move out of the margin and into floated elements. */
@media screen and (700px < width <= 1400px) {
  .example {
    clear: both; /* Don't overlap margin notes with examples */
  }
}
.example .description::before {
  content: "Example: ";
}
.example .description {
  font-style: italic;
  font-family: var(--verso-structure-font-family);
  padding: var(--verso--box-padding);
}
.example[open] .description {
  margin-bottom: 0;
}
.example-content {
  padding: 0 var(--verso--box-padding) var(--verso--box-padding);
}
.example-content > :first-child {
  margin-top: 0;
}
.example-content p:last-child {
  margin-bottom:0;
}
.example .hl.lean.block {
  overflow-x: auto;
}
</style><style>
.syntax-error {
  white-space: normal;
}
.syntax-error::before {
  counter-reset: linenumber;
}
.syntax-error > .line {
  display: block;
  white-space: pre;
  counter-increment: linenumber;
  font-family: var(--verso-code-font-family);
}
.syntax-error > .line::before {
  -webkit-user-select: none;
  display: inline-block;
  content: counter(linenumber);
  border-right: 1px solid #ddd;
  width: 2em;
  padding-right: 0.25em;
  margin-right: 0.25em;
  font-family: var(--verso-code-font-family);
  text-align: right;
}

:is(.syntax-error > .line):has(.parse-message)::before {
  color: red;
  font-weight: bold;
}

.syntax-error .parse-message > code.hover-info {
  display:none;
}

.syntax-error .parse-message {
  white-space: pre;
  text-decoration-skip-ink: none;
  color: red;
  font-weight: 600;
}
</style><script>
      
window.addEventListener("load", () => {
  const innerProps = {
    onShow(inst) { console.log(inst); },
    onHide(inst) { console.log(inst); },
    content(tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  };
  const outerProps = {
    allowHtml: true,
    theme: "lean",
    placement: 'bottom-start',
    maxWidth: "none",
    delay: 100,
    moveTransition: 'transform 0.2s ease-out',
    onTrigger(inst, event) {
      const ref = event.currentTarget;
      const block = ref.closest('.hl.lean');
      block.querySelectorAll('.active').forEach((i) => i.classList.remove('active'));
      ref.classList.add("active");
    },
    onUntrigger(inst, event) {
      const ref = event.currentTarget;
      const block = ref.closest('.hl.lean');
      block.querySelectorAll('.active').forEach((i) => i.classList.remove('active'));
    }
  };
  tippy.createSingleton(tippy('pre.grammar.hl.lean .nonterminal.documented, pre.grammar.hl.lean .from-nonterminal.documented, pre.grammar.hl.lean .local-name.documented', innerProps), outerProps);
});
</script>
    <script>
      
window.addEventListener("load", () => {
  tippy('.keyword-of.hl.lean', {
    allowHtml: true,
    /* DEBUG -- remove the space: * /
    onHide(any) { return false; },
    trigger: "click",
    // */
    maxWidth: "none",

    theme: "lean",
    placement: 'bottom-start',
    content (tgt) {
      const content = document.createElement("span");
      const state = tgt.querySelector(".hover-info").cloneNode(true);
      state.style.display = "block";
      content.appendChild(state);
      /* Render docstrings - TODO server-side */
      if ('undefined' !== typeof marked) {
          for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
              const str = d.innerText;
              const html = marked.parse(str);
              const rendered = document.createElement("div");
              rendered.classList.add("docstring");
              rendered.innerHTML = html;
              d.parentNode.replaceChild(rendered, d);
          }
      }
      content.style.display = "block";
      content.className = "hl lean popup";
      return content;
    }
  });
});
</script>
    <script>
      
window.onload = () => {

    // Don't show hovers inside of closed tactic states
    function blockedByTactic(elem) {
      let parent = elem.parentNode;
      while (parent && "classList" in parent) {
        if (parent.classList.contains("tactic")) {
          const toggle = parent.querySelector("input.tactic-toggle");
          if (toggle) {
            return !toggle.checked;
          }
        }
        parent = parent.parentNode;
      }
      return false;
    }

    function blockedByTippy(elem) {
      // Don't show a new hover until the old ones are all closed.
      // Scoped to the nearest "top-level block" to avoid being O(n) in the size of the document.
      var block = elem;
      const topLevel = new Set(["section", "body", "html", "nav", "header"]);
      while (block.parentNode && !topLevel.has(block.parentNode.nodeName.toLowerCase())) {
        block = block.parentNode;
      }
      for (const child of block.querySelectorAll(".token, .has-info")) {
        if (child._tippy && child._tippy.state.isVisible) { return true };
      }
      return false;
    }

    for (const c of document.querySelectorAll(".hl.lean .token")) {
        if (c.dataset.binding != "") {
            c.addEventListener("mouseover", (event) => {
                if (blockedByTactic(c)) {return;}
                const context = c.closest(".hl.lean").dataset.leanContext;
                for (const example of document.querySelectorAll(".hl.lean")) {
                    if (example.dataset.leanContext == context) {
                        for (const tok of example.querySelectorAll(".token")) {
                            if (c.dataset.binding == tok.dataset.binding) {
                                tok.classList.add("binding-hl");
                            }
                        }
                    }
                }
            });
        }
        c.addEventListener("mouseout", (event) => {
            for (const tok of document.querySelectorAll(".hl.lean .token")) {
                tok.classList.remove("binding-hl");
            }
        });
    }
    /* Render docstrings */
    if ('undefined' !== typeof marked) {
        for (const d of document.querySelectorAll("code.docstring, pre.docstring")) {
            const str = d.innerText;
            const html = marked.parse(str);
            const rendered = document.createElement("div");
            rendered.classList.add("docstring");
            rendered.innerHTML = html;
            d.parentNode.replaceChild(rendered, d);
        }
    }
    // Add hovers
    let siteRoot = typeof __versoSiteRoot !== 'undefined' ? __versoSiteRoot : "/";
    let docsJson = siteRoot + "-verso-docs.json";
    fetch(docsJson).then((resp) => resp.json()).then((versoDocData) => {

      const defaultTippyProps = {
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        theme: "lean",
        maxWidth: "none",
        appendTo: () => document.body,
        interactive: true,
        delay: [100, null],
        ignoreAttributes: true,
        onShow(inst) {
          if (inst.reference.querySelector(".hover-info") || "versoHover" in inst.reference.dataset) {
            if (blockedByTactic(inst.reference)) { return false };
            if (blockedByTippy(inst.reference)) { return false; }
          } else { // Nothing to show here!
            return false;
          }
        },
        content (tgt) {
          const content = document.createElement("span");
          content.className = "hl lean";
          content.style.display = "block";
          content.style.maxHeight = "300px";
          content.style.overflowY = "auto";
          content.style.overflowX = "hidden";
          const hoverId = tgt.dataset.versoHover;
          const hoverInfo = tgt.querySelector(".hover-info");
          if (hoverId) { // Docstrings from the table
            // TODO stop doing an implicit conversion from string to number here
            let data = versoDocData[hoverId];
            if (data) {
              const info = document.createElement("span");
              info.className = "hover-info";
              info.style.display = "block";
              info.innerHTML = data;
              content.appendChild(info);
              /* Render docstrings - TODO server-side */
              if ('undefined' !== typeof marked) {
                  for (const d of content.querySelectorAll("code.docstring, pre.docstring")) {
                      const str = d.innerText;
                      const html = marked.parse(str);
                      const rendered = document.createElement("div");
                      rendered.classList.add("docstring");
                      rendered.innerHTML = html;
                      d.parentNode.replaceChild(rendered, d);
                  }
              }
            } else {
              content.innerHTML = "Failed to load doc ID: " + hoverId;
            }
          } else if (hoverInfo) { // The inline info, still used for compiler messages
            content.appendChild(hoverInfo.cloneNode(true));
          }
          return content;
        }
      };

      const addTippy = (selector, props) => {
        tippy(selector, Object.assign({}, defaultTippyProps, props));
      };
      addTippy('.hl.lean .const.token, .hl.lean .keyword.token, .hl.lean .literal.token, .hl.lean .option.token, .hl.lean .var.token, .hl.lean .typed.token', {theme: 'lean'});
      addTippy('.hl.lean .has-info.warning', {theme: 'warning message'});
      addTippy('.hl.lean .has-info.info', {theme: 'info message'});
      addTippy('.hl.lean .has-info.error', {theme: 'error message'});

      tippy('.hl.lean .tactic', {
        allowHtml: true,
        /* DEBUG -- remove the space: * /
        onHide(any) { return false; },
        trigger: "click",
        // */
        maxWidth: "none",
        onShow(inst) {
          const toggle = inst.reference.querySelector("input.tactic-toggle");
          if (toggle && toggle.checked) {
            return false;
          }
          if (blockedByTippy(inst.reference)) { return false; }
        },
        theme: "tactic",
        placement: 'bottom-start',
        content (tgt) {
          const content = document.createElement("span");
          const state = tgt.querySelector(".tactic-state").cloneNode(true);
          state.style.display = "block";
          content.appendChild(state);
          content.style.display = "block";
          content.className = "hl lean popup";
          return content;
        }
      });
  });
}
</script>
    <script type="module" src="static/search/search-init.js"></script>
    </head>
  <body>
    <header>
      <div class="header-logo-wrapper">
        <a href="" id="logo"><img src="static/lean_logo.svg"></a></div>
      <div class="header-title-wrapper">
        <a href="" class="header-title"><h1>
            The Lean Language Reference</h1>
          </a></div>
      </header>
    <label for="toggle-toc" id="toggle-toc-click"><span class="line line1"></span><span class="line line2"></span><span class="line line3"></span></label><div class="with-toc">
      <div class="toc-backdrop" onclick="document.getElementById('toggle-toc-click')?.click()"></div>
      <nav id="toc">
        <input type="checkbox" id="toggle-toc"><div class="first">
          <a href="" class="toc-title"><h1>
              The Lean Language Reference</h1>
            </a><div class="split-tocs">
            <div class="split-toc book">
              <div class="title">
                <label for="--verso-manual-toc-----bookRoot" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-----bookRoot"></label><span class="">Table of Contents</span></div>
              <table><tr class="numbered"><td class="num">1.</td><td><a href="Introduction/#introduction">Introduction</a></td></tr><tr class="numbered"><td class="num">2.</td><td><a href="Elaboration-and-Compilation/#The-Lean-Language-Reference--Elaboration-and-Compilation">Elaboration and Compilation</a></td></tr><tr class="numbered"><td class="num">3.</td><td><a href="Interacting-with-Lean/#interaction">Interacting with Lean</a></td></tr><tr class="numbered"><td class="num">4.</td><td><a href="The-Type-System/#type-system">The Type System</a></td></tr><tr class="numbered"><td class="num">5.</td><td><a href="Source-Files-and-Modules/#files">Source Files and Modules</a></td></tr><tr class="numbered"><td class="num">6.</td><td><a href="Namespaces-and-Sections/#namespaces-sections">Namespaces and Sections</a></td></tr><tr class="numbered"><td class="num">7.</td><td><a href="Definitions/#definitions">Definitions</a></td></tr><tr class="numbered"><td class="num">8.</td><td><a href="Axioms/#axioms">Axioms</a></td></tr><tr class="numbered"><td class="num">9.</td><td><a href="Attributes/#attributes">Attributes</a></td></tr><tr class="numbered"><td class="num">10.</td><td><a href="Terms/#terms">Terms</a></td></tr><tr class="numbered"><td class="num">11.</td><td><a href="Type-Classes/#type-classes">Type Classes</a></td></tr><tr class="numbered"><td class="num">12.</td><td><a href="Coercions/#coercions">Coercions</a></td></tr><tr class="numbered"><td class="num">13.</td><td><a href="Tactic-Proofs/#tactics">Tactic Proofs</a></td></tr><tr class="numbered"><td class="num">14.</td><td><a href="Functors___-Monads-and--do--Notation/#monads-and-do">Functors, Monads and <code>do</code>-Notation</a></td></tr><tr class="current numbered"><td class="num">15.</td><td><a href="IO/#io">IO</a></td></tr><tr class="numbered"><td class="num">16.</td><td><a href="The-Simplifier/#the-simplifier">The Simplifier</a></td></tr><tr class="numbered"><td class="num">17.</td><td><a href="Basic-Propositions/#basic-props">Basic Propositions</a></td></tr><tr class="numbered"><td class="num">18.</td><td><a href="Basic-Types/#basic-types">Basic Types</a></td></tr><tr class="numbered"><td class="num">19.</td><td><a href="Notations-and-Macros/#language-extension">Notations and Macros</a></td></tr><tr class="numbered"><td class="num">20.</td><td><a href="Run-Time-Code/#runtime">Run-Time Code</a></td></tr><tr class="numbered"><td class="num">21.</td><td><a href="Build-Tools-and-Distribution/#build-tools-and-distribution">Build Tools and Distribution</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="releases/#release-notes">Release Notes</a></td></tr><tr class="unnumbered"><td class="num"><td><a href="the-index/#The-Lean-Language-Reference--Index">Index</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-io" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-io" checked="checked"></label><span class="number">15.</span> <span class=""><a href="IO/#io">IO</a></span></div>
              <table><tr class="numbered"><td class="num">15.1.</td><td><a href="IO/Logical-Model/#The-Lean-Language-Reference--IO--Logical-Model">Logical Model</a></td></tr><tr class="numbered"><td class="num">15.2.</td><td><a href="IO/Control-Structures/#io-monad-control">Control Structures</a></td></tr><tr class="numbered"><td class="num">15.3.</td><td><a href="IO/Console-Output/#The-Lean-Language-Reference--IO--Console-Output">Console Output</a></td></tr><tr class="numbered"><td class="num">15.4.</td><td><a href="IO/Mutable-References/#The-Lean-Language-Reference--IO--Mutable-References">Mutable References</a></td></tr><tr class="numbered"><td class="num">15.5.</td><td><a href="IO/Files___-File-Handles___-and-Streams/#The-Lean-Language-Reference--IO--Files___-File-Handles___-and-Streams">Files, File Handles, and Streams</a></td></tr><tr class="numbered"><td class="num">15.6.</td><td><a href="IO/System-and-Platform-Information/#platform-info">System and Platform Information</a></td></tr><tr class="numbered"><td class="num">15.7.</td><td><a href="IO/Environment-Variables/#io-monad-getenv">Environment Variables</a></td></tr><tr class="numbered"><td class="num">15.8.</td><td><a href="IO/Timing/#io-timing">Timing</a></td></tr><tr class="numbered"><td class="num">15.9.</td><td><a href="IO/Processes/#io-processes">Processes</a></td></tr><tr class="numbered"><td class="num">15.10.</td><td><a href="IO/Random-Numbers/#The-Lean-Language-Reference--IO--Random-Numbers">Random Numbers</a></td></tr><tr class="current numbered"><td class="num">15.11.</td><td><a href="IO/Tasks-and-Threads/#concurrency">Tasks and Threads</a></td></tr></table></div>
            <div class="split-toc">
              <div class="title">
                <label for="--verso-manual-toc-concurrency" class="toggle-split-toc"><input type="checkbox" class="toggle-split-toc" id="--verso-manual-toc-concurrency" checked="checked"></label><span class="number">15.11.</span> <span class="current"><a href="IO/Tasks-and-Threads/#concurrency">Tasks and Threads</a></span></div>
              <ol>
                <li>
                  <a href="IO/Tasks-and-Threads/#LEAN_NUM_THREADS"><code>LEAN_NUM_THREADS</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task"><code>Task</code></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">1.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Creating-Tasks">Creating Tasks</a></span></li>
                <li>
                  <span class="header head-2"><span class="level-num">1.1.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Creating-Tasks--Pure-Tasks">Pure Tasks</a></span></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task___spawn"><code>spawn</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task___pure"><code>pure</code></a></li>
                <li>
                  <span class="header head-2"><span class="level-num">1.2.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Creating-Tasks--Impure-Tasks">Impure Tasks</a></span></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#BaseIO___asTask"><code>BaseIO.asTask</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#EIO___asTask"><code>EIO.asTask</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___asTask"><code>IO.asTask</code></a></li>
                <li>
                  <span class="header head-2"><span class="level-num">1.3.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Creating-Tasks--Priorities">Priorities</a></span></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task___Priority"><code>Priority</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task___Priority___default"><code>default</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task___Priority___max"><code>max</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task___Priority___dedicated"><code>dedicated</code></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">2.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Task-Results">Task Results</a></span></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task___get"><code>get</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___wait"><code>IO.wait</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___waitAny"><code>waitAny</code></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">3.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Sequencing-Tasks">Sequencing Tasks</a></span></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task___map"><code>map</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task___bind"><code>bind</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Task___mapList"><code>mapList</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#BaseIO___mapTask"><code>BaseIO.mapTask</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#EIO___mapTask"><code>EIO.mapTask</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___mapTask"><code>IO.mapTask</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#BaseIO___mapTasks"><code>BaseIO.mapTasks</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#EIO___mapTasks"><code>EIO.mapTasks</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___mapTasks"><code>IO.mapTasks</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#BaseIO___bindTask"><code>BaseIO.bindTask</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#EIO___bindTask"><code>EIO.bindTask</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___bindTask"><code>IO.bindTask</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#BaseIO___chainTask"><code>BaseIO.chainTask</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#EIO___chainTask"><code>EIO.chainTask</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___chainTask"><code>IO.chainTask</code></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">4.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Cancellation-and-Status">Cancellation and Status</a></span></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___cancel"><code>cancel</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___checkCanceled"><code>checkCanceled</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___hasFinished"><code>hasFinished</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___getTaskState"><code>getTaskState</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___TaskState___waiting"><code>TaskState</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___getTID"><code>getTID</code></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">5.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Promises">Promises</a></span></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___Promise"><code>Promise</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___Promise___new"><code>IO.Promise.new</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___Promise___isResolved"><code>isResolved</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___Promise___result___"><code>result?</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___Promise___result___-next"><code>result!</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___Promise___resultD"><code>resultD</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#IO___Promise___resolve"><code>resolve</code></a></li>
                <li>
                  <span class="header head-1"><span class="level-num">6.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Communication-Between-Tasks">Communication Between Tasks</a></span></li>
                <li>
                  <span class="header head-2"><span class="level-num">6.1.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Communication-Between-Tasks--Channels">Channels</a></span></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Channel"><code>Channel</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Channel___new"><code>Std.Channel.new</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Channel___send"><code>send</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Channel___recv"><code>recv</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Channel___forAsync"><code>forAsync</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Channel___sync"><code>sync</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Channel___Sync"><code>Sync</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___CloseableChannel"><code>CloseableChannel</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___CloseableChannel___new"><code>Std.CloseableChannel.new</code></a></li>
                <li>
                  <span class="header head-2"><span class="level-num">6.2.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Communication-Between-Tasks--Mutexes">Mutexes</a></span></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Mutex"><code>Mutex</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Mutex___new"><code>Std.Mutex.new</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Mutex___atomically"><code>atomically</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Mutex___atomicallyOnce"><code>atomicallyOnce</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___AtomicT"><code>AtomicT</code></a></li>
                <li>
                  <span class="header head-2"><span class="level-num">6.3.</span> <a href="IO/Tasks-and-Threads/#The-Lean-Language-Reference--IO--Tasks-and-Threads--Communication-Between-Tasks--Condition-Variables">Condition Variables</a></span></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Condvar"><code>Condvar</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Condvar___new"><code>Std.Condvar.new</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Condvar___wait"><code>Std.Condvar.wait</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Condvar___notifyOne"><code>notifyOne</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Condvar___notifyAll"><code>notifyAll</code></a></li>
                <li>
                  <a href="IO/Tasks-and-Threads/#Std___Condvar___waitUntil"><code>waitUntil</code></a></li>
                </ol>
              </div>
            </div>
          </div>
        <div class="last">
          <ul id="meta-links">
            <li>
              <a href="https://github.com/leanprover/reference-manual">Source Code</a></li>
            <li>
              <a href="https://github.com/leanprover/reference-manual/issues">Report Issues</a></li>
            </ul>
          </div>
        </nav>
      <main><div class="content-wrapper">
          <nav class="prev-next-buttons">
            <a class="local-button active" href="IO/Random-Numbers/#The-Lean-Language-Reference--IO--Random-Numbers" rel="prev" title="15.10. Random Numbers"><span class="arrow">←</span><span class="where">15.10. Random Numbers</span></a><a class="local-button active" href="The-Simplifier/#the-simplifier" rel="next" title="16. The Simplifier"><span class="where">16. The Simplifier</span><span class="arrow">→</span></a></nav>
          <section>
            <h1>
              15.11. Tasks and Threads<span class="permalink-widget inline"><a href="find/?domain=Verso.Genre.Manual.section&name=concurrency" title="Permalink">🔗</a></span></h1>
            <p>
              <span id="--tech-term-Tasks" class="def-technical-term"><em>Tasks</em></span> are the fundamental primitive for writing multi-threaded code.
A <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.2" data-verso-hover="55">α</span></code> represents a computation that, at some point, will <span id="--tech-term-resolve" class="def-technical-term"><em>resolve</em></span> to a value of type <code>α</code>; it may be computed on a separate thread.
When a task has resolved, its value can be read; attempting to get the value of a task before it resolves causes the current thread to block until the task has resolved.
Tasks are similar to promises in JavaScript, <code>JoinHandle</code> in Rust, and <code>Future</code> in Scala.</p>
            <p>
              Tasks may either carry out pure computations or <code class="hl lean inline" data-lean-context="examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> actions.
The API of pure tasks resembles that of <a class="technical-term" href="Basic-Types/Lazy-Computations/#--tech-term-thunk">thunks</a>: <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code> creates a <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.15" data-verso-hover="55">α</span></code> from a function in <code class="hl lean inline" data-lean-context="examples"><a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a> <span class="unknown token" data-binding="">→</span> <span class="var token" data-binding="var-_uniq.18" data-verso-hover="55">α</span></code>, and <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___get"><span class="const token" data-binding="const-Task.get" data-verso-hover="3014">Task.get</span></a></code> waits until the function's value has been computed and then returns it.
The value is cached, so subsequent requests do not need to recompute it.
The key difference lies in when the computation occurs: while the values of thunks are not computed until they are forced, tasks execute opportunistically in a separate thread.</p>
            <p>
              Tasks in <code class="hl lean inline" data-lean-context="examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> are created using <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#IO___asTask"><span class="const token" data-binding="const-IO.asTask" data-verso-hover="3009">IO.asTask</span></a></code>.
Similarly, <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#BaseIO___asTask"><span class="const token" data-binding="const-BaseIO.asTask" data-verso-hover="3218">BaseIO.asTask</span></a></code> and <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#EIO___asTask"><span class="const token" data-binding="const-EIO.asTask" data-verso-hover="3219">EIO.asTask</span></a></code> create tasks in other <code class="hl lean inline" data-lean-context="examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> monads.
These tasks may have side effects, and can communicate with other tasks.</p>
            <p>
              When the last reference to a task is dropped it is <span id="--tech-term-cancelled" class="def-technical-term"><em>cancelled</em></span>.
Pure tasks created with <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code> are terminated upon cancellation.
Tasks spawned with <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#IO___asTask"><span class="const token" data-binding="const-IO.asTask" data-verso-hover="3009">IO.asTask</span></a></code>, <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#EIO___asTask"><span class="const token" data-binding="const-EIO.asTask" data-verso-hover="3219">EIO.asTask</span></a></code>, or <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#BaseIO___asTask"><span class="const token" data-binding="const-BaseIO.asTask" data-verso-hover="3218">BaseIO.asTask</span></a></code> continue executing and must explicitly check for cancellation using <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code>.
Tasks may be explicitly cancelled using <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#IO___cancel"><span class="const token" data-binding="const-IO.cancel" data-verso-hover="3221">IO.cancel</span></a></code>.</p>
            <p>
              The Lean runtime maintains a thread pool for running tasks.
The size of the thread pool is determined by the environment variable <code class="env-var" id="LEAN_NUM_THREADS">LEAN_NUM_THREADS</code> if it is set, or by the number of logical processors on the current machine otherwise.
The size of the thread pool is not a hard limit; in certain situations it may be exceeded to avoid deadlocks.
By default, these threads are used to run tasks; each task has a <span id="--tech-term-priority" class="def-technical-term"><em>priority</em></span> (<code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a></code>), and higher-priority tasks take precedence over lower-priority tasks.
Tasks may also be assigned to dedicated threads by spawning them with a sufficiently high priority.</p>
            <div class="namedocs" id="Task">
              <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task" title="Permalink">🔗</a></span><span class="label">type</span><pre class="signature hl lean block"><div class="wide-only">Task.{u} (<span class="var token" data-binding="var-_uniq.101" data-verso-hover="55">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span></div><div class="narrow-only">Task.{u} (<span class="var token" data-binding="var-_uniq.101" data-verso-hover="55">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span></div></pre><div class="text">
                <p>
                  <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.67" data-verso-hover="55">α</span></code> is a primitive for asynchronous computation.
It represents a computation that will resolve to a value of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.67" data-verso-hover="55">α</span></code>,
possibly being computed on another thread. This is similar to <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Future</span></code> in Scala,
<code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise</span></code> in Javascript, and <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">JoinHandle</span></code> in Rust.</p>
                <p>
                  The tasks have an overridden representation in the runtime.</p>
                </div>
              </div>
            <section>
              <h2 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Creating-Tasks">
                15.11.1. Creating Tasks</h2>
              <p>
                Pure tasks should typically be created with <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, as <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___pure"><span class="const token" data-binding="const-Task.pure" data-verso-hover="3223">Task.pure</span></a></code> is a task that's already been resolved with the provided value.
Impure tasks are created by one of the <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#BaseIO___asTask"><span class="const token" data-binding="const-BaseIO.asTask" data-verso-hover="3218">asTask</span></a></code> actions.</p>
              <section>
                <h3 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Creating-Tasks--Pure-Tasks">
                  15.11.1.1. Pure Tasks</h3>
                <p>
                  Pure tasks may be created outside the <code class="hl lean inline" data-lean-context="examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> family of monads.
They are terminated when the last reference to them is dropped.</p>
                <div class="namedocs" id="Task___spawn">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task.spawn" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Task.spawn.{u} {<span class="var token" data-binding="var-_uniq.137" data-verso-hover="55">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>} (<span class="var token" data-binding="var-_uniq.139" data-verso-hover="2969">fn</span> : <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a> → <span class="var token" data-binding="var-_uniq.137" data-verso-hover="55">α</span>)
  (<span class="var token" data-binding="var-_uniq.140" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.137" data-verso-hover="55">α</span></div><div class="narrow-only">Task.spawn.{u} {<span class="var token" data-binding="var-_uniq.137" data-verso-hover="55">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>}
  (<span class="var token" data-binding="var-_uniq.139" data-verso-hover="2969">fn</span> : <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a> → <span class="var token" data-binding="var-_uniq.137" data-verso-hover="55">α</span>)
  (<span class="var token" data-binding="var-_uniq.140" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>) :
  <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.137" data-verso-hover="55">α</span></div></pre><div class="text">
                    <p>
                      <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">spawn</span> <span class="unknown token" data-binding="">fn</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">Task</span> <span class="unknown token" data-binding="">α</span></code> constructs and immediately launches a new task for
evaluating the function <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.114" data-verso-hover="2969">fn</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">)</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.113" data-verso-hover="55">α</span></code> asynchronously.</p>
                    <p>
                      <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.136" data-verso-hover="3224">prio</span></code>, if provided, is the priority of the task.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Task___pure">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task.pure" title="Permalink">🔗</a></span><span class="label">constructor of Task</span><pre class="signature hl lean block"><div class="wide-only">Task.pure.{u} {<span class="var token" data-binding="var-_uniq.156" data-verso-hover="55">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>} (<span class="var token" data-binding="var-_uniq.157" data-verso-hover="46">get</span> : <span class="var token" data-binding="var-_uniq.156" data-verso-hover="55">α</span>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.156" data-verso-hover="55">α</span></div><div class="narrow-only">Task.pure.{u} {<span class="var token" data-binding="var-_uniq.156" data-verso-hover="55">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>} (<span class="var token" data-binding="var-_uniq.157" data-verso-hover="46">get</span> : <span class="var token" data-binding="var-_uniq.156" data-verso-hover="55">α</span>) :
  <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.156" data-verso-hover="55">α</span></div></pre><div class="text">
                    <p>
                      <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___pure"><span class="const token" data-binding="const-Task.pure" data-verso-hover="3223">Task.pure</span></a> <span class="unknown token" data-binding="">(</span><span class="var token" data-binding="var-_uniq.152" data-verso-hover="46">a</span> <span class="unknown token" data-binding="">:</span> <span class="var token" data-binding="var-_uniq.141" data-verso-hover="55">α</span><span class="unknown token" data-binding="">)</span></code> constructs a task that is already resolved with value <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.152" data-verso-hover="46">a</span></code>.</p>
                    </div>
                  </div>
                </section>
              <section>
                <h3 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Creating-Tasks--Impure-Tasks">
                  15.11.1.2. Impure Tasks</h3>
                <p>
                  When spawning a task with side effects using one of the <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#IO___asTask"><span class="const token" data-binding="const-IO.asTask" data-verso-hover="3009">asTask</span></a></code> functions, it's important to actually execute the resulting <code class="hl lean inline" data-lean-context="examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> action.
A task is spawned each time the resulting action is executed, not when <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#IO___asTask"><span class="const token" data-binding="const-IO.asTask" data-verso-hover="3009">asTask</span></a></code> is called.
Impure tasks continue running even when there are no references to them, though this does result in cancellation being requested.
Cancellation may also be explicitly requested using <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#IO___cancel"><span class="const token" data-binding="const-IO.cancel" data-verso-hover="3221">IO.cancel</span></a></code>.
The impure task must check for cancellation using <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code>.</p>
                <div class="namedocs" id="BaseIO___asTask">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=BaseIO.asTask" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">BaseIO.asTask {<span class="var token" data-binding="var-_uniq.192" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.193" data-verso-hover="1341">act</span> : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.192" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.194" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.192" data-verso-hover="162">α</span>)</div><div class="narrow-only">BaseIO.asTask {<span class="var token" data-binding="var-_uniq.192" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.193" data-verso-hover="1341">act</span> : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.192" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.194" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.192" data-verso-hover="162">α</span>)</div></pre><div class="text">
                    <p>
                      Runs <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.170" data-verso-hover="1341">act</span></code> in a separate <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a></code>, with priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.171" data-verso-hover="3224">prio</span></code>.</p>
                    <p>
                      Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes the task to be started eagerly. Pure accesses to the
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a></code> do not influence the impure <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.176" data-verso-hover="1341">act</span></code>.</p>
                    <p>
                      Unlike pure tasks created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last
reference to the task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.184" data-verso-hover="1341">act</span></code> should explicitly check for cancellation via
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it should be terminated or otherwise react to the last reference being
dropped.</p>
                    </div>
                  </div>
                <div class="namedocs" id="EIO___asTask">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=EIO.asTask" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">EIO.asTask {<span class="var token" data-binding="var-_uniq.224" data-verso-hover="162">ε </span><span class="var token" data-binding="var-_uniq.225" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.226" data-verso-hover="1339">act</span> : <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.224" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.225" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.227" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.224" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.225" data-verso-hover="162">α</span>))</div><div class="narrow-only">EIO.asTask {<span class="var token" data-binding="var-_uniq.224" data-verso-hover="162">ε </span><span class="var token" data-binding="var-_uniq.225" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.226" data-verso-hover="1339">act</span> : <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.224" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.225" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.227" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.224" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.225" data-verso-hover="162">α</span>))</div></pre><div class="text">
                    <p>
                      Runs <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.197" data-verso-hover="1339">act</span></code> in a separate <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a></code>, with priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.198" data-verso-hover="3224">prio</span></code>. Because <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.195" data-verso-hover="162">ε</span></code> actions may throw an exception
of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.195" data-verso-hover="162">ε</span></code>, the result of the task is an <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.195" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.196" data-verso-hover="162">α</span></code>.</p>
                    <p>
                      Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> action causes the task to be started eagerly. Pure accesses to the <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a></code>
do not influence the impure <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.207" data-verso-hover="1339">act</span></code>.</p>
                    <p>
                      Unlike pure tasks created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last
reference to the task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.216" data-verso-hover="1339">act</span></code> should explicitly check for cancellation via
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it should be terminated or otherwise react to the last reference being
dropped.</p>
                    </div>
                  </div>
                <div class="namedocs" id="IO___asTask">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.asTask" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">IO.asTask {<span class="var token" data-binding="var-_uniq.259" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.260" data-verso-hover="1335">act</span> : <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> <span class="var token" data-binding="var-_uniq.259" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.261" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.259" data-verso-hover="162">α</span>))</div><div class="narrow-only">IO.asTask {<span class="var token" data-binding="var-_uniq.259" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.260" data-verso-hover="1335">act</span> : <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> <span class="var token" data-binding="var-_uniq.259" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.261" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.259" data-verso-hover="162">α</span>))</div></pre><div class="text">
                    <p>
                      Runs <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.229" data-verso-hover="1335">act</span></code> in a separate <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a></code>, with priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.230" data-verso-hover="3224">prio</span></code>. Because <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> actions may throw an exception
of type <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a></code>, the result of the task is an <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.228" data-verso-hover="162">α</span></code>.</p>
                    <p>
                      Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes the task to be started eagerly. Pure accesses to the
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a></code> do not influence the impure <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.239" data-verso-hover="1335">act</span></code>. Because <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> actions may throw an exception of type
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a></code>, the result of the task is an <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.238" data-verso-hover="162">α</span></code>.</p>
                    <p>
                      Unlike pure tasks created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last
reference to the task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.251" data-verso-hover="1335">act</span></code> should explicitly check for cancellation via
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it should be terminated or otherwise react to the last reference being
dropped.</p>
                    </div>
                  </div>
                </section>
              <section>
                <h3 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Creating-Tasks--Priorities">
                  15.11.1.3. Priorities</h3>
                <p>
                  Task priorities are used by the thread scheduler to assign tasks to threads.
Within the priority range <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">default</span></a></code>–<code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___Priority___max"><span class="const token" data-binding="const-Task.Priority.max" data-verso-hover="3226">max</span></a></code>, higher-priority tasks always take precedence over lower-priority tasks.
Tasks spawned with priority <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___Priority___dedicated"><span class="const token" data-binding="const-Task.Priority.dedicated" data-verso-hover="3010">dedicated</span></a></code> are assigned their own dedicated threads and do not contend with other tasks for the threads in the thread pool.</p>
                <div class="namedocs" id="Task___Priority">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task.Priority" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Task.Priority : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div><div class="narrow-only">Task.Priority : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div></pre><div class="text">
                    <p>
                      Task priority.</p>
                    <p>
                      Tasks with higher priority will always be scheduled before tasks with lower priority. Tasks with a
priority greater than <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___Priority___max"><span class="const token" data-binding="const-Task.Priority.max" data-verso-hover="3226">Task.Priority.max</span></a></code> are scheduled on dedicated threads.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Task___Priority___default">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task.Priority.default" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Task.Priority.default : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a></div><div class="narrow-only">Task.Priority.default : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a></div></pre><div class="text">
                    <p>
                      The default priority for spawned tasks, also the lowest priority: <code class="hl lean inline" data-lean-context="docstring-examples"><span class="typed token" data-binding="" data-verso-hover="7">0</span></code>.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Task___Priority___max">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task.Priority.max" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Task.Priority.max : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a></div><div class="narrow-only">Task.Priority.max : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a></div></pre><div class="text">
                    <p>
                      The highest regular priority for spawned tasks: <code class="hl lean inline" data-lean-context="docstring-examples"><span class="typed token" data-binding="" data-verso-hover="7">8</span></code>.</p>
                    <p>
                      Spawning a task with a priority higher than <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___Priority___max"><span class="const token" data-binding="const-Task.Priority.max" data-verso-hover="3226">Task.Priority.max</span></a></code> is not an error but will spawn a
dedicated worker for the task. This is indicated using <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___Priority___dedicated"><span class="const token" data-binding="const-Task.Priority.dedicated" data-verso-hover="3010">Task.Priority.dedicated</span></a></code>. Regular priority
tasks are placed in a thread pool and worked on according to their priority order.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Task___Priority___dedicated">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task.Priority.dedicated" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Task.Priority.dedicated : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a></div><div class="narrow-only">Task.Priority.dedicated : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a></div></pre><div class="text">
                    <p>
                      Indicates that a task should be scheduled on a dedicated thread.</p>
                    <p>
                      Any priority higher than <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___Priority___max"><span class="const token" data-binding="const-Task.Priority.max" data-verso-hover="3226">Task.Priority.max</span></a></code> will result in the task being scheduled
immediately on a dedicated thread. This is particularly useful for long-running and/or
I/O-bound tasks since Lean will, by default, allocate no more non-dedicated workers
than the number of cores to reduce context switches.</p>
                    </div>
                  </div>
                </section>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Task-Results">
                15.11.2. Task Results</h2>
              <div class="namedocs" id="Task___get">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task.get" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Task.get.{u} {<span class="var token" data-binding="var-_uniq.881" data-verso-hover="55">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>} (<span class="var token" data-binding="var-_uniq.882" data-verso-hover="3227">self</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.881" data-verso-hover="55">α</span>) : <span class="var token" data-binding="var-_uniq.881" data-verso-hover="55">α</span></div><div class="narrow-only">Task.get.{u} {<span class="var token" data-binding="var-_uniq.881" data-verso-hover="55">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u</span>}
  (<span class="var token" data-binding="var-_uniq.882" data-verso-hover="3227">self</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.881" data-verso-hover="55">α</span>) : <span class="var token" data-binding="var-_uniq.881" data-verso-hover="55">α</span></div></pre><div class="text">
                  <p>
                    Blocks the current thread until the given task has finished execution, and then returns the result
of the task. If the current thread is itself executing a (non-dedicated) task, the maximum
threadpool size is temporarily increased by one while waiting so as to ensure the process cannot
be deadlocked by threadpool starvation. Note that when the current thread is unblocked, more tasks
than the configured threadpool size may temporarily be running at the same time until sufficiently
many tasks have finished.</p>
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___map"><span class="const token" data-binding="const-Task.map" data-verso-hover="3228">Task.map</span></a></code> and <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___bind"><span class="const token" data-binding="const-Task.bind" data-verso-hover="3229">Task.bind</span></a></code> should be preferred over <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___get"><span class="const token" data-binding="const-Task.get" data-verso-hover="3014">Task.get</span></a></code> for setting up task dependencies
where possible as they do not require temporarily growing the threadpool in this way. In
particular, calling <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___get"><span class="const token" data-binding="const-Task.get" data-verso-hover="3014">Task.get</span></a></code> in a task continuation with <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">sync</span> <span class="unknown token" data-binding="">:=</span> <span class="unknown token" data-binding="">true</span><span class="unknown token" data-binding="">)</span></code> will panic as the
continuation is decidedly not "cheap" in this case and deadlocks may otherwise occur. The
waited-upon task should instead be returned and unwrapped using <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Task.bind</span><span class="unknown token" data-binding="">/</span><span class="unknown token" data-binding="">IO.bindTask</span></code>.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___wait">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.wait" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">IO.wait {<span class="var token" data-binding="var-_uniq.886" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.887" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.886" data-verso-hover="162">α</span>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.886" data-verso-hover="162">α</span></div><div class="narrow-only">IO.wait {<span class="var token" data-binding="var-_uniq.886" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.887" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.886" data-verso-hover="162">α</span>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.886" data-verso-hover="162">α</span></div></pre><div class="text">
                  <p>
                    Waits for the task to finish, then returns its result.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___waitAny">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.waitAny" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">IO.waitAny {<span class="var token" data-binding="var-_uniq.892" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.893" data-verso-hover="3230">tasks</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.892" data-verso-hover="162">α</span>))
  (<span class="var token" data-binding="var-_uniq.900" data-verso-hover="3231">h</span> : <span class="var token" data-binding="var-_uniq.893" data-verso-hover="3230">tasks</span>.<a href="Basic-Types/Linked-Lists/#List___length"><span class="const token" data-binding="const-List.length" data-verso-hover="1354">length</span></a><span class="const token" data-binding="const-GT.gt" data-verso-hover="1133"> &gt; </span>0 := by exact Nat.zero_lt_succ _) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.892" data-verso-hover="162">α</span></div><div class="narrow-only">IO.waitAny {<span class="var token" data-binding="var-_uniq.892" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  (<span class="var token" data-binding="var-_uniq.893" data-verso-hover="3230">tasks</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.892" data-verso-hover="162">α</span>))
  (<span class="var token" data-binding="var-_uniq.900" data-verso-hover="3231">h</span> : <span class="var token" data-binding="var-_uniq.893" data-verso-hover="3230">tasks</span>.<a href="Basic-Types/Linked-Lists/#List___length"><span class="const token" data-binding="const-List.length" data-verso-hover="1354">length</span></a><span class="const token" data-binding="const-GT.gt" data-verso-hover="1133"> &gt; </span>0 := by
    exact Nat.zero_lt_succ _) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.892" data-verso-hover="162">α</span></div></pre><div class="text">
                  <p>
                    Waits until any of the tasks in the list has finished, then return its result.</p>
                  </div>
                </div>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Sequencing-Tasks">
                15.11.3. Sequencing Tasks</h2>
              <p>
                These operators create new tasks from old ones.
When possible, it's good to use <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___map"><span class="const token" data-binding="const-Task.map" data-verso-hover="3228">Task.map</span></a></code> or <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___bind"><span class="const token" data-binding="const-Task.bind" data-verso-hover="3229">Task.bind</span></a></code> instead of manually calling <code class="hl lean inline" data-lean-context="examples"><a href="IO/Tasks-and-Threads/#Task___get"><span class="const token" data-binding="const-Task.get" data-verso-hover="3014">Task.get</span></a></code> in a new task because they don't temporarily increase the size of the thread pool.</p>
              <div class="namedocs" id="Task___map">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task.map" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Task.map.{u_1, u_2} {<span class="var token" data-binding="var-_uniq.975" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.976" data-verso-hover="187">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_2</span>} (<span class="var token" data-binding="var-_uniq.978" data-verso-hover="180">f</span> : <span class="var token" data-binding="var-_uniq.975" data-verso-hover="44">α</span> → <span class="var token" data-binding="var-_uniq.976" data-verso-hover="187">β</span>)
  (<span class="var token" data-binding="var-_uniq.979" data-verso-hover="3227">x</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.975" data-verso-hover="44">α</span>) (<span class="var token" data-binding="var-_uniq.980" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.981" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.976" data-verso-hover="187">β</span></div><div class="narrow-only">Task.map.{u_1, u_2} {<span class="var token" data-binding="var-_uniq.975" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.976" data-verso-hover="187">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_2</span>} (<span class="var token" data-binding="var-_uniq.978" data-verso-hover="180">f</span> : <span class="var token" data-binding="var-_uniq.975" data-verso-hover="44">α</span> → <span class="var token" data-binding="var-_uniq.976" data-verso-hover="187">β</span>) (<span class="var token" data-binding="var-_uniq.979" data-verso-hover="3227">x</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.975" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.980" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.981" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.976" data-verso-hover="187">β</span></div></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">map</span> <span class="unknown token" data-binding="">f</span> <span class="unknown token" data-binding="">x</span></code> maps function <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.919" data-verso-hover="180">f</span></code> over the task <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.920" data-verso-hover="3227">x</span></code>: that is, it constructs
(and immediately launches) a new task which will wait for the value of <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.920" data-verso-hover="3227">x</span></code> to
be available and then calls <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.919" data-verso-hover="180">f</span></code> on the result.</p>
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.971" data-verso-hover="3224">prio</span></code>, if provided, is the priority of the task.
If <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.972" data-verso-hover="3232">sync</span></code> is set to true, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="180">f</span></code> is executed on the current thread if <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.970" data-verso-hover="3227">x</span></code> has already finished and
otherwise on the thread that <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.970" data-verso-hover="3227">x</span></code> finished on. <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.971" data-verso-hover="3224">prio</span></code> is ignored in this case. This should only be
done when executing <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.969" data-verso-hover="180">f</span></code> is cheap and non-blocking.</p>
                  </div>
                </div>
              <div class="namedocs" id="Task___bind">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task.bind" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Task.bind.{u_1, u_2} {<span class="var token" data-binding="var-_uniq.1282" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1283" data-verso-hover="187">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_2</span>} (<span class="var token" data-binding="var-_uniq.1284" data-verso-hover="3227">x</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1282" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1286" data-verso-hover="3233">f</span> : <span class="var token" data-binding="var-_uniq.1282" data-verso-hover="44">α</span> → <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1283" data-verso-hover="187">β</span>) (<span class="var token" data-binding="var-_uniq.1287" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1288" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1283" data-verso-hover="187">β</span></div><div class="narrow-only">Task.bind.{u_1, u_2} {<span class="var token" data-binding="var-_uniq.1282" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1283" data-verso-hover="187">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_2</span>} (<span class="var token" data-binding="var-_uniq.1284" data-verso-hover="3227">x</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1282" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1286" data-verso-hover="3233">f</span> : <span class="var token" data-binding="var-_uniq.1282" data-verso-hover="44">α</span> → <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1283" data-verso-hover="187">β</span>)
  (<span class="var token" data-binding="var-_uniq.1287" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1288" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1283" data-verso-hover="187">β</span></div></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">bind</span> <span class="unknown token" data-binding="">x</span> <span class="unknown token" data-binding="">f</span></code> does a monad "bind" operation on the task <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.984" data-verso-hover="3227">x</span></code> with function <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.985" data-verso-hover="3233">f</span></code>:
that is, it constructs (and immediately launches) a new task which will wait
for the value of <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.984" data-verso-hover="3227">x</span></code> to be available and then calls <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.985" data-verso-hover="3233">f</span></code> on the result,
resulting in a new task which is then run for a result.</p>
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1278" data-verso-hover="3224">prio</span></code>, if provided, is the priority of the task.
If <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1279" data-verso-hover="3232">sync</span></code> is set to true, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1277" data-verso-hover="3233">f</span></code> is executed on the current thread if <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="3227">x</span></code> has already finished and
otherwise on the thread that <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1276" data-verso-hover="3227">x</span></code> finished on. <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1278" data-verso-hover="3224">prio</span></code> is ignored in this case. This should only be
done when executing <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1277" data-verso-hover="3233">f</span></code> is cheap and non-blocking.</p>
                  </div>
                </div>
              <div class="namedocs" id="Task___mapList">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Task.mapList" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Task.mapList.{u_1, u_2} {<span class="var token" data-binding="var-_uniq.1296" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1297" data-verso-hover="187">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_2</span>} (<span class="var token" data-binding="var-_uniq.1299" data-verso-hover="3234">f</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.1296" data-verso-hover="44">α</span> → <span class="var token" data-binding="var-_uniq.1297" data-verso-hover="187">β</span>)
  (<span class="var token" data-binding="var-_uniq.1300" data-verso-hover="3230">tasks</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1296" data-verso-hover="44">α</span>))
  (<span class="var token" data-binding="var-_uniq.1301" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1302" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1297" data-verso-hover="187">β</span></div><div class="narrow-only">Task.mapList.{u_1, u_2} {<span class="var token" data-binding="var-_uniq.1296" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1297" data-verso-hover="187">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_2</span>} (<span class="var token" data-binding="var-_uniq.1299" data-verso-hover="3234">f</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.1296" data-verso-hover="44">α</span> → <span class="var token" data-binding="var-_uniq.1297" data-verso-hover="187">β</span>)
  (<span class="var token" data-binding="var-_uniq.1300" data-verso-hover="3230">tasks</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1296" data-verso-hover="44">α</span>))
  (<span class="var token" data-binding="var-_uniq.1301" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1302" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1297" data-verso-hover="187">β</span></div></pre><div class="text">
                  <p>
                    Creates a task that, when all <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1292" data-verso-hover="3230">tasks</span></code> have finished, computes the result of <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1291" data-verso-hover="3234">f</span></code> applied to their
results.</p>
                  </div>
                </div>
              <div class="namedocs" id="BaseIO___mapTask">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=BaseIO.mapTask" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">BaseIO.mapTask.{u_1} {<span class="var token" data-binding="var-_uniq.1338" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1339" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1341" data-verso-hover="3235">f</span> : <span class="var token" data-binding="var-_uniq.1338" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.1339" data-verso-hover="162">β</span>)
  (<span class="var token" data-binding="var-_uniq.1343" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1338" data-verso-hover="44">α</span>) (<span class="var token" data-binding="var-_uniq.1344" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1345" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1339" data-verso-hover="162">β</span>)</div><div class="narrow-only">BaseIO.mapTask.{u_1} {<span class="var token" data-binding="var-_uniq.1338" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1339" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1341" data-verso-hover="3235">f</span> : <span class="var token" data-binding="var-_uniq.1338" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.1339" data-verso-hover="162">β</span>)
  (<span class="var token" data-binding="var-_uniq.1343" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1338" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1344" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1345" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1339" data-verso-hover="162">β</span>)</div></pre><div class="text">
                  <p>
                    Creates a new task that waits for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1306" data-verso-hover="3227">t</span></code> to complete and then runs the <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1305" data-verso-hover="3235">f</span></code> on its
result. This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1307" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes the task to be started eagerly. Unlike pure tasks
created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the
task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">act</span></code> should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it
should be terminated or otherwise react to the last reference being dropped.</p>
                  </div>
                </div>
              <div class="namedocs" id="EIO___mapTask">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=EIO.mapTask" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">EIO.mapTask.{u_1} {<span class="var token" data-binding="var-_uniq.1386" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1387" data-verso-hover="162">ε </span><span class="var token" data-binding="var-_uniq.1388" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1390" data-verso-hover="3236">f</span> : <span class="var token" data-binding="var-_uniq.1386" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1387" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1388" data-verso-hover="162">β</span>)
  (<span class="var token" data-binding="var-_uniq.1392" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1386" data-verso-hover="44">α</span>) (<span class="var token" data-binding="var-_uniq.1393" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1394" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.1387" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1388" data-verso-hover="162">β</span>))</div><div class="narrow-only">EIO.mapTask.{u_1} {<span class="var token" data-binding="var-_uniq.1386" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1387" data-verso-hover="162">ε </span><span class="var token" data-binding="var-_uniq.1388" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1390" data-verso-hover="3236">f</span> : <span class="var token" data-binding="var-_uniq.1386" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1387" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1388" data-verso-hover="162">β</span>)
  (<span class="var token" data-binding="var-_uniq.1392" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1386" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1393" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1394" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.1387" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1388" data-verso-hover="162">β</span>))</div></pre><div class="text">
                  <p>
                    Creates a new task that waits for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1350" data-verso-hover="3227">t</span></code> to complete and then runs the <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1349" data-verso-hover="3236">f</span></code> on its result.
This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1351" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes the task to be started eagerly. Unlike pure tasks
created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the
task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">act</span></code> should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it
should be terminated or otherwise react to the last reference being dropped. Because <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1360" data-verso-hover="162">ε</span></code> actions
may throw an exception of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1360" data-verso-hover="162">ε</span></code>, the result of the task is an <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.1360" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1359" data-verso-hover="44">α</span></code>.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___mapTask">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.mapTask" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">IO.mapTask.{u_1} {<span class="var token" data-binding="var-_uniq.1434" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1435" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1437" data-verso-hover="3237">f</span> : <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> <span class="var token" data-binding="var-_uniq.1435" data-verso-hover="162">β</span>) (<span class="var token" data-binding="var-_uniq.1439" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1440" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1441" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.1435" data-verso-hover="162">β</span>))</div><div class="narrow-only">IO.mapTask.{u_1} {<span class="var token" data-binding="var-_uniq.1434" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1435" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  (<span class="var token" data-binding="var-_uniq.1437" data-verso-hover="3237">f</span> : <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> <span class="var token" data-binding="var-_uniq.1435" data-verso-hover="162">β</span>) (<span class="var token" data-binding="var-_uniq.1439" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1434" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1440" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1441" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.1435" data-verso-hover="162">β</span>))</div></pre><div class="text">
                  <p>
                    Creates a new task that waits for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1398" data-verso-hover="3227">t</span></code> to complete and then runs the <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1397" data-verso-hover="3237">f</span></code> on its result.
This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1399" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes the task to be started eagerly. Unlike pure tasks
created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the
task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">act</span></code> should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it
should be terminated or otherwise react to the last reference being dropped. Because <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> actions
may throw an exception of type <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a></code>, the result of the task is an <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.1407" data-verso-hover="44">α</span></code>.</p>
                  </div>
                </div>
              <div class="namedocs" id="BaseIO___mapTasks">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=BaseIO.mapTasks" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">BaseIO.mapTasks.{u_1} {<span class="var token" data-binding="var-_uniq.1477" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1478" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1480" data-verso-hover="3238">f</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.1477" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.1478" data-verso-hover="162">β</span>)
  (<span class="var token" data-binding="var-_uniq.1482" data-verso-hover="3230">tasks</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1477" data-verso-hover="44">α</span>))
  (<span class="var token" data-binding="var-_uniq.1483" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1484" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1478" data-verso-hover="162">β</span>)</div><div class="narrow-only">BaseIO.mapTasks.{u_1} {<span class="var token" data-binding="var-_uniq.1477" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1478" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1480" data-verso-hover="3238">f</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.1477" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.1478" data-verso-hover="162">β</span>)
  (<span class="var token" data-binding="var-_uniq.1482" data-verso-hover="3230">tasks</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1477" data-verso-hover="44">α</span>))
  (<span class="var token" data-binding="var-_uniq.1483" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1484" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1478" data-verso-hover="162">β</span>)</div></pre><div class="text">
                  <p>
                    Creates a new task that waits for all the tasks in the list <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1445" data-verso-hover="3230">tasks</span></code> to complete, and then runs the
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1444" data-verso-hover="3238">f</span></code> on their results. This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1446" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes the task to be started eagerly. Unlike pure tasks
created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the
task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">act</span></code> should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it
should be terminated or otherwise react to the last reference being dropped.</p>
                  </div>
                </div>
              <div class="namedocs" id="EIO___mapTasks">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=EIO.mapTasks" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">EIO.mapTasks.{u_1} {<span class="var token" data-binding="var-_uniq.1521" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1522" data-verso-hover="162">ε </span><span class="var token" data-binding="var-_uniq.1523" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1525" data-verso-hover="3239">f</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.1521" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1522" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1523" data-verso-hover="162">β</span>)
  (<span class="var token" data-binding="var-_uniq.1527" data-verso-hover="3230">tasks</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1521" data-verso-hover="44">α</span>))
  (<span class="var token" data-binding="var-_uniq.1528" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1529" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.1522" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1523" data-verso-hover="162">β</span>))</div><div class="narrow-only">EIO.mapTasks.{u_1} {<span class="var token" data-binding="var-_uniq.1521" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1522" data-verso-hover="162">ε </span><span class="var token" data-binding="var-_uniq.1523" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1525" data-verso-hover="3239">f</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.1521" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1522" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1523" data-verso-hover="162">β</span>)
  (<span class="var token" data-binding="var-_uniq.1527" data-verso-hover="3230">tasks</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1521" data-verso-hover="44">α</span>))
  (<span class="var token" data-binding="var-_uniq.1528" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1529" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.1522" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1523" data-verso-hover="162">β</span>))</div></pre><div class="text">
                  <p>
                    Creates a new task that waits for all the tasks in the list <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1489" data-verso-hover="3230">tasks</span></code> to complete, and then runs the
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1486" data-verso-hover="162">ε</span></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1488" data-verso-hover="3239">f</span></code> on their results. This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1490" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes the task to be started eagerly. Unlike pure tasks
created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the
task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">act</span></code> should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it
should be terminated or otherwise react to the last reference being dropped.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___mapTasks">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.mapTasks" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">IO.mapTasks.{u_1} {<span class="var token" data-binding="var-_uniq.1549" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1550" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1552" data-verso-hover="3240">f</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.1549" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> <span class="var token" data-binding="var-_uniq.1550" data-verso-hover="162">β</span>)
  (<span class="var token" data-binding="var-_uniq.1554" data-verso-hover="3230">tasks</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1549" data-verso-hover="44">α</span>))
  (<span class="var token" data-binding="var-_uniq.1555" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1556" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.1550" data-verso-hover="162">β</span>))</div><div class="narrow-only">IO.mapTasks.{u_1} {<span class="var token" data-binding="var-_uniq.1549" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1550" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1552" data-verso-hover="3240">f</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> <span class="var token" data-binding="var-_uniq.1549" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> <span class="var token" data-binding="var-_uniq.1550" data-verso-hover="162">β</span>)
  (<span class="var token" data-binding="var-_uniq.1554" data-verso-hover="3230">tasks</span> : <a href="Basic-Types/Linked-Lists/#List___nil"><span class="const token" data-binding="const-List" data-verso-hover="43">List</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1549" data-verso-hover="44">α</span>))
  (<span class="var token" data-binding="var-_uniq.1555" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1556" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.1550" data-verso-hover="162">β</span>))</div></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> specialization of <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#EIO___mapTasks"><span class="const token" data-binding="const-EIO.mapTasks" data-verso-hover="3241">EIO.mapTasks</span></a></code>.</p>
                  </div>
                </div>
              <div class="namedocs" id="BaseIO___bindTask">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=BaseIO.bindTask" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">BaseIO.bindTask.{u_1} {<span class="var token" data-binding="var-_uniq.1592" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1593" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1594" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1592" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1596" data-verso-hover="3242">f</span> : <span class="var token" data-binding="var-_uniq.1592" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1593" data-verso-hover="162">β</span>))
  (<span class="var token" data-binding="var-_uniq.1598" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1599" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1593" data-verso-hover="162">β</span>)</div><div class="narrow-only">BaseIO.bindTask.{u_1} {<span class="var token" data-binding="var-_uniq.1592" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1593" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1594" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1592" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1596" data-verso-hover="3242">f</span> : <span class="var token" data-binding="var-_uniq.1592" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1593" data-verso-hover="162">β</span>))
  (<span class="var token" data-binding="var-_uniq.1598" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1599" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1593" data-verso-hover="162">β</span>)</div></pre><div class="text">
                  <p>
                    Creates a new task that waits for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1559" data-verso-hover="3227">t</span></code> to complete, runs the <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1560" data-verso-hover="3242">f</span></code> on its result, and then
continues as the resulting task. This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1561" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes this new task to be started eagerly. Unlike pure tasks
created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the
task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">act</span></code> should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it
should be terminated or otherwise react to the last reference being dropped.</p>
                  </div>
                </div>
              <div class="namedocs" id="EIO___bindTask">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=EIO.bindTask" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">EIO.bindTask.{u_1} {<span class="var token" data-binding="var-_uniq.1639" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1640" data-verso-hover="162">ε </span><span class="var token" data-binding="var-_uniq.1641" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1642" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1639" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1644" data-verso-hover="3243">f</span> : <span class="var token" data-binding="var-_uniq.1639" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1640" data-verso-hover="162">ε</span> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.1640" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1641" data-verso-hover="162">β</span>)))
  (<span class="var token" data-binding="var-_uniq.1646" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1647" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.1640" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1641" data-verso-hover="162">β</span>))</div><div class="narrow-only">EIO.bindTask.{u_1} {<span class="var token" data-binding="var-_uniq.1639" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1640" data-verso-hover="162">ε </span><span class="var token" data-binding="var-_uniq.1641" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1642" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1639" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1644" data-verso-hover="3243">f</span> : <span class="var token" data-binding="var-_uniq.1639" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1640" data-verso-hover="162">ε</span> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.1640" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1641" data-verso-hover="162">β</span>)))
  (<span class="var token" data-binding="var-_uniq.1646" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1647" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.1640" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1641" data-verso-hover="162">β</span>))</div></pre><div class="text">
                  <p>
                    Creates a new task that waits for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1603" data-verso-hover="3227">t</span></code> to complete, runs the <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1601" data-verso-hover="162">ε</span></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1604" data-verso-hover="3243">f</span></code> on its result, and
then continues as the resulting task. This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1605" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes this new task to be started eagerly. Unlike pure tasks
created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the
task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">act</span></code> should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it
should be terminated or otherwise react to the last reference being dropped. Because <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1613" data-verso-hover="162">ε</span></code> actions
may throw an exception of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1613" data-verso-hover="162">ε</span></code>, the result of the task is an <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <span class="var token" data-binding="var-_uniq.1613" data-verso-hover="162">ε</span> <span class="var token" data-binding="var-_uniq.1612" data-verso-hover="44">α</span></code>.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___bindTask">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.bindTask" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">IO.bindTask.{u_1} {<span class="var token" data-binding="var-_uniq.1687" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1688" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1689" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1687" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1691" data-verso-hover="3244">f</span> : <span class="var token" data-binding="var-_uniq.1687" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.1688" data-verso-hover="162">β</span>)))
  (<span class="var token" data-binding="var-_uniq.1693" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1694" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.1688" data-verso-hover="162">β</span>))</div><div class="narrow-only">IO.bindTask.{u_1} {<span class="var token" data-binding="var-_uniq.1687" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1688" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1689" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1687" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1691" data-verso-hover="3244">f</span> : <span class="var token" data-binding="var-_uniq.1687" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.1688" data-verso-hover="162">β</span>)))
  (<span class="var token" data-binding="var-_uniq.1693" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1694" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.1688" data-verso-hover="162">β</span>))</div></pre><div class="text">
                  <p>
                    Creates a new task that waits for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1650" data-verso-hover="3227">t</span></code> to complete, runs the <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1651" data-verso-hover="3244">f</span></code> on its result, and then
continues as the resulting task. This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1652" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes this new task to be started eagerly. Unlike pure tasks
created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the
task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">act</span></code> should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it
should be terminated or otherwise react to the last reference being dropped. Because <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> actions
may throw an exception of type <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a></code>, the result of the task is an <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#Except___error"><span class="const token" data-binding="const-Except" data-verso-hover="1336">Except</span></a> <a href="IO/Logical-Model/#IO___Error___alreadyExists"><span class="const token" data-binding="const-IO.Error" data-verso-hover="1337">IO.Error</span></a> <span class="var token" data-binding="var-_uniq.1660" data-verso-hover="44">α</span></code>.</p>
                  </div>
                </div>
              <div class="namedocs" id="BaseIO___chainTask">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=BaseIO.chainTask" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">BaseIO.chainTask.{u_1} {<span class="var token" data-binding="var-_uniq.1743" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} (<span class="var token" data-binding="var-_uniq.1744" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1743" data-verso-hover="44">α</span>) (<span class="var token" data-binding="var-_uniq.1746" data-verso-hover="3245">f</span> : <span class="var token" data-binding="var-_uniq.1743" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)
  (<span class="var token" data-binding="var-_uniq.1748" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1749" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div><div class="narrow-only">BaseIO.chainTask.{u_1} {<span class="var token" data-binding="var-_uniq.1743" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  (<span class="var token" data-binding="var-_uniq.1744" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1743" data-verso-hover="44">α</span>) (<span class="var token" data-binding="var-_uniq.1746" data-verso-hover="3245">f</span> : <span class="var token" data-binding="var-_uniq.1743" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)
  (<span class="var token" data-binding="var-_uniq.1748" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1749" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div></pre><div class="text">
                  <p>
                    Creates a new task that waits for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1696" data-verso-hover="3227">t</span></code> to complete and then runs the <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1697" data-verso-hover="3245">f</span></code> on its result.
This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1698" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    This is a version of <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#BaseIO___mapTask"><span class="const token" data-binding="const-BaseIO.mapTask" data-verso-hover="3246">BaseIO.mapTask</span></a></code> that ignores the result value.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a></code> action causes the task to be started eagerly. Unlike pure tasks
created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the
task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">act</span></code> should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it
should be terminated or otherwise react to the last reference being dropped.</p>
                  </div>
                </div>
              <div class="namedocs" id="EIO___chainTask">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=EIO.chainTask" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">EIO.chainTask.{u_1} {<span class="var token" data-binding="var-_uniq.1800" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} {<span class="var token" data-binding="var-_uniq.1801" data-verso-hover="162">ε</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1802" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1800" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1804" data-verso-hover="3247">f</span> : <span class="var token" data-binding="var-_uniq.1800" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1801" data-verso-hover="162">ε</span> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>) (<span class="var token" data-binding="var-_uniq.1806" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1807" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1801" data-verso-hover="162">ε</span> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div><div class="narrow-only">EIO.chainTask.{u_1} {<span class="var token" data-binding="var-_uniq.1800" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  {<span class="var token" data-binding="var-_uniq.1801" data-verso-hover="162">ε</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.1802" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1800" data-verso-hover="44">α</span>)
  (<span class="var token" data-binding="var-_uniq.1804" data-verso-hover="3247">f</span> : <span class="var token" data-binding="var-_uniq.1800" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1801" data-verso-hover="162">ε</span> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)
  (<span class="var token" data-binding="var-_uniq.1806" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1807" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1801" data-verso-hover="162">ε</span> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div></pre><div class="text">
                  <p>
                    Creates a new task that waits for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1752" data-verso-hover="3227">t</span></code> to complete and then runs the <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1751" data-verso-hover="162">ε</span></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1753" data-verso-hover="3247">f</span></code> on its result.
This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1754" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    This is a version of <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#EIO___mapTask"><span class="const token" data-binding="const-EIO.mapTask" data-verso-hover="3248">EIO.mapTask</span></a></code> that ignores the result value.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#EIO"><span class="const token" data-binding="const-EIO" data-verso-hover="1340">EIO</span></a> <span class="var token" data-binding="var-_uniq.1779" data-verso-hover="162">ε</span></code> action causes the task to be started eagerly. Unlike pure tasks
created by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the
task is dropped. The <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">act</span></code> should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it
should be terminated or otherwise react to the last reference being dropped.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___chainTask">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.chainTask" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">IO.chainTask.{u_1} {<span class="var token" data-binding="var-_uniq.1847" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} (<span class="var token" data-binding="var-_uniq.1848" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1847" data-verso-hover="44">α</span>) (<span class="var token" data-binding="var-_uniq.1850" data-verso-hover="3249">f</span> : <span class="var token" data-binding="var-_uniq.1847" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)
  (<span class="var token" data-binding="var-_uniq.1852" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1853" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div><div class="narrow-only">IO.chainTask.{u_1} {<span class="var token" data-binding="var-_uniq.1847" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  (<span class="var token" data-binding="var-_uniq.1848" data-verso-hover="3227">t</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1847" data-verso-hover="44">α</span>) (<span class="var token" data-binding="var-_uniq.1850" data-verso-hover="3249">f</span> : <span class="var token" data-binding="var-_uniq.1847" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)
  (<span class="var token" data-binding="var-_uniq.1852" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>)
  (<span class="var token" data-binding="var-_uniq.1853" data-verso-hover="3232">sync</span> : <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a> := <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool.false" data-verso-hover="40">false</span></a>) : <a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div></pre><div class="text">
                  <p>
                    Creates a new task that waits for <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1809" data-verso-hover="3227">t</span></code> to complete and then runs the <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> action <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1810" data-verso-hover="3249">f</span></code> on its result.
This new task has priority <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.1811" data-verso-hover="3224">prio</span></code>.</p>
                  <p>
                    This is a version of <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___mapTask"><span class="const token" data-binding="const-IO.mapTask" data-verso-hover="3250">IO.mapTask</span></a></code> that ignores the result value.</p>
                  <p>
                    Running the resulting <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Logical-Model/#IO"><span class="const token" data-binding="const-IO" data-verso-hover="1">IO</span></a></code> action causes the task to be started eagerly. Unlike pure tasks created
by <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___spawn"><span class="const token" data-binding="const-Task.spawn" data-verso-hover="3217">Task.spawn</span></a></code>, tasks created by this function will run even if the last reference to the task is
dropped. The act should explicitly check for cancellation via <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> if it should be
terminated or otherwise react to the last reference being dropped.</p>
                  </div>
                </div>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Cancellation-and-Status">
                15.11.4. Cancellation and Status</h2>
              <p>
                Impure tasks should use <code>IO.checkCanceled</code> to react to cancellation, which occurs either as a result of <code>IO.cancel</code> or when the last reference to the task is dropped.
Pure tasks are terminated automatically upon cancellation.</p>
              <div class="namedocs" id="IO___cancel">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.cancel" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">IO.cancel.{u_1} {<span class="var token" data-binding="var-_uniq.1857" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1857" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div><div class="narrow-only">IO.cancel.{u_1} {<span class="var token" data-binding="var-_uniq.1857" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} :
  <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1857" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div></pre><div class="text">
                  <p>
                    Requests cooperative cancellation of the task. The task must explicitly call <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___checkCanceled"><span class="const token" data-binding="const-IO.checkCanceled" data-verso-hover="3220">IO.checkCanceled</span></a></code> to
react to the cancellation.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___checkCanceled">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.checkCanceled" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">IO.checkCanceled : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a></div><div class="narrow-only">IO.checkCanceled : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a></div></pre><div class="text">
                  <p>
                    Checks whether the current task's cancellation flag has been set by calling <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___cancel"><span class="const token" data-binding="const-IO.cancel" data-verso-hover="3221">IO.cancel</span></a></code> or by
dropping the last reference to the task.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___hasFinished">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.hasFinished" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">IO.hasFinished.{u_1} {<span class="var token" data-binding="var-_uniq.1869" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} (<span class="var token" data-binding="var-_uniq.1870" data-verso-hover="3227">task</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1869" data-verso-hover="44">α</span>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a></div><div class="narrow-only">IO.hasFinished.{u_1} {<span class="var token" data-binding="var-_uniq.1869" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>}
  (<span class="var token" data-binding="var-_uniq.1870" data-verso-hover="3227">task</span> : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1869" data-verso-hover="44">α</span>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a></div></pre><div class="text">
                  <p>
                    Checks whether the task has finished execution, at which point calling <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___get"><span class="const token" data-binding="const-Task.get" data-verso-hover="3014">Task.get</span></a></code> will return
immediately.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___getTaskState">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.getTaskState" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">IO.getTaskState.{u_1} {<span class="var token" data-binding="var-_uniq.1904" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1904" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="IO/Tasks-and-Threads/#IO___TaskState___waiting"><span class="const token" data-binding="const-IO.TaskState" data-verso-hover="3251">IO.TaskState</span></a></div><div class="narrow-only">IO.getTaskState.{u_1} {<span class="var token" data-binding="var-_uniq.1904" data-verso-hover="44">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} :
  <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1904" data-verso-hover="44">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="IO/Tasks-and-Threads/#IO___TaskState___waiting"><span class="const token" data-binding="const-IO.TaskState" data-verso-hover="3251">IO.TaskState</span></a></div></pre><div class="text">
                  <p>
                    Returns the current state of a task in the Lean runtime's task manager.</p>
                  <p>
                    For tasks derived from <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise</span></code>s, the states <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">waiting</span></code> and <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">running</span></code> should be considered
equivalent.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___TaskState___waiting">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.TaskState.finished" title="Permalink">🔗</a></span><span class="label">inductive type</span><pre class="signature hl lean block"><div class="wide-only">IO.TaskState : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div><div class="narrow-only">IO.TaskState : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div></pre><div class="text">
                  <p>
                    The current state of a <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a></code> in the Lean runtime's task manager.</p>
                  <h1>
                    Constructors</h1>
                  <div class="constructor">
                    <pre class="name-and-type hl lean">waiting : <a href="IO/Tasks-and-Threads/#IO___TaskState___waiting"><span class="const token" data-binding="const-IO.TaskState" data-verso-hover="3251">IO.TaskState</span></a></pre><div class="docs">
                      <p>
                        The <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a></code> is waiting to be run.</p>
                      <p>
                        It can be waiting for dependencies to complete or sitting in the task manager queue waiting for a
thread to run on.</p>
                      </div>
                    </div>
                  <div class="constructor">
                    <pre class="name-and-type hl lean">running : <a href="IO/Tasks-and-Threads/#IO___TaskState___waiting"><span class="const token" data-binding="const-IO.TaskState" data-verso-hover="3251">IO.TaskState</span></a></pre><div class="docs">
                      <p>
                        The <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a></code> is actively running on a thread or, in the case of a <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">Promise</span></a></code>, waiting for a call to
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___Promise___resolve"><span class="const token" data-binding="const-IO.Promise.resolve" data-verso-hover="3253">IO.Promise.resolve</span></a></code>.</p>
                      </div>
                    </div>
                  <div class="constructor">
                    <pre class="name-and-type hl lean">finished : <a href="IO/Tasks-and-Threads/#IO___TaskState___waiting"><span class="const token" data-binding="const-IO.TaskState" data-verso-hover="3251">IO.TaskState</span></a></pre><div class="docs">
                      <p>
                        The <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a></code> has finished running and its result is available. Calling <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task___get"><span class="const token" data-binding="const-Task.get" data-verso-hover="3014">Task.get</span></a></code> or <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#IO___wait"><span class="const token" data-binding="const-IO.wait" data-verso-hover="3254">IO.wait</span></a></code> on
the task will not block.</p>
                      </div>
                    </div>
                  </div>
                </div>
              <div class="namedocs" id="IO___getTID">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.getTID" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">IO.getTID : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/Fixed-Precision-Integers/#UInt64___ofBitVec"><span class="const token" data-binding="const-UInt64" data-verso-hover="461">UInt64</span></a></div><div class="narrow-only">IO.getTID : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/Fixed-Precision-Integers/#UInt64___ofBitVec"><span class="const token" data-binding="const-UInt64" data-verso-hover="461">UInt64</span></a></div></pre><div class="text">
                  <p>
                    Returns the thread ID of the calling thread.</p>
                  </div>
                </div>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Promises">
                15.11.5. Promises</h2>
              <p>
                Promises represent a value that will be supplied in the future.
Supplying the value is called <span id="--tech-term-resolving-next" class="def-technical-term"><em>resolving</em></span> the promise.
Once created, a promise can be stored in a data structure or passed around like any other value, and attempts to read from it will block until it is resolved.</p>
              <div class="namedocs" id="IO___Promise">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.Promise" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">IO.Promise (<span class="var token" data-binding="var-_uniq.2230" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div><div class="narrow-only">IO.Promise (<span class="var token" data-binding="var-_uniq.2230" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div></pre><div class="text">
                  <p>
                    <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise</span> <span class="unknown token" data-binding="">α</span></code> allows you to create a <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.1921" data-verso-hover="162">α</span></code> whose value is provided later by calling <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">resolve</span></code>.</p>
                  <p>
                    Typical usage is as follows:</p>
                  <ol start="1">
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="keyword token" data-binding="kw-occ-null-0">let</span> <span class="unknown token" data-binding="">promise</span> <span class="unknown token" data-binding="">←</span> <span class="unknown token" data-binding="">Promise.new</span></code> creates a promise</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">promise.result?</span> <span class="unknown token" data-binding="">:</span> <span class="unknown token" data-binding="">Task</span> <span class="unknown token" data-binding="">(</span><span class="unknown token" data-binding="">Option</span> <span class="unknown token" data-binding="">α</span><span class="unknown token" data-binding="">)</span></code> can now be passed around</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">promise.result?.get</span></code> blocks until the promise is resolved</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">promise.resolve</span> <span class="unknown token" data-binding="">a</span></code> resolves the promise</p>
                      </li>
                    <li>
                      <p>
                        <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">promise.result?.get</span></code> now returns <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.some" data-verso-hover="47">some</span></a> <span class="var token" data-binding="var-_uniq.2014" data-verso-hover="3255">a</span></code></p>
                      </li>
                    </ol>
                  <p>
                    If the promise is dropped without ever being resolved, <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">promise.result?.get</span></code> will return <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.none" data-verso-hover="48">none</span></a></code>.
See <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise.result!</span><span class="unknown token" data-binding="">/</span><span class="var token" data-binding="var-_uniq.2106" data-verso-hover="3256">resultD</span></code> for other ways to handle this case.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___Promise___new">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.Promise.new" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">IO.Promise.new {<span class="var token" data-binding="var-_uniq.2243" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} [<a href="Type-Classes/Basic-Classes/#Nonempty___intro"><span class="const token" data-binding="const-Nonempty" data-verso-hover="777">Nonempty</span></a> <span class="var token" data-binding="var-_uniq.2243" data-verso-hover="162">α</span>] : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2243" data-verso-hover="162">α</span>)</div><div class="narrow-only">IO.Promise.new {<span class="var token" data-binding="var-_uniq.2243" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} [<a href="Type-Classes/Basic-Classes/#Nonempty___intro"><span class="const token" data-binding="const-Nonempty" data-verso-hover="777">Nonempty</span></a> <span class="var token" data-binding="var-_uniq.2243" data-verso-hover="162">α</span>] :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2243" data-verso-hover="162">α</span>)</div></pre><div class="text">
                  <p>
                    Creates a new <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise</span></code>.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___Promise___isResolved">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.Promise.isResolved" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">IO.Promise.isResolved {<span class="var token" data-binding="var-_uniq.2249" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.2251" data-verso-hover="3257">promise</span> : <a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2249" data-verso-hover="162">α</span>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a></div><div class="narrow-only">IO.Promise.isResolved {<span class="var token" data-binding="var-_uniq.2249" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  (<span class="var token" data-binding="var-_uniq.2251" data-verso-hover="3257">promise</span> : <a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2249" data-verso-hover="162">α</span>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a></div></pre><div class="text">
                  <p>
                    Checks whether the promise has already been resolved, i.e. whether access to <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">result</span><span class="unknown token" data-binding="">*</span></code> will return
immediately.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___Promise___result___">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.Promise.result?" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">IO.Promise.result? {<span class="var token" data-binding="var-_uniq.2264" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.2266" data-verso-hover="3257">promise</span> : <a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2264" data-verso-hover="162">α</span>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option" data-verso-hover="45">Option</span></a> <span class="var token" data-binding="var-_uniq.2264" data-verso-hover="162">α</span>)</div><div class="narrow-only">IO.Promise.result? {<span class="var token" data-binding="var-_uniq.2264" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  (<span class="var token" data-binding="var-_uniq.2266" data-verso-hover="3257">promise</span> : <a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2264" data-verso-hover="162">α</span>) :
  <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> (<a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option" data-verso-hover="45">Option</span></a> <span class="var token" data-binding="var-_uniq.2264" data-verso-hover="162">α</span>)</div></pre><div class="text">
                  <p>
                    Like <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise.result</span></code>, but resolves to <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.none" data-verso-hover="48">none</span></a></code> if the promise is dropped without ever being resolved.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___Promise___result___-next">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.Promise.result!" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">IO.Promise.result! {<span class="var token" data-binding="var-_uniq.2298" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.2300" data-verso-hover="3257">promise</span> : <a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2298" data-verso-hover="162">α</span>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.2298" data-verso-hover="162">α</span></div><div class="narrow-only">IO.Promise.result! {<span class="var token" data-binding="var-_uniq.2298" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  (<span class="var token" data-binding="var-_uniq.2300" data-verso-hover="3257">promise</span> : <a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2298" data-verso-hover="162">α</span>) : <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.2298" data-verso-hover="162">α</span></div></pre><div class="text">
                  <p>
                    The result task of a <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise</span></code>.</p>
                  <p>
                    The task blocks until <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise.resolve</span></code> is called. If the promise is dropped without ever being
resolved, evaluating the task will panic and, when not using fatal panics, block forever. Use
<code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise.result?</span></code> to handle this case explicitly.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___Promise___resultD">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.Promise.resultD" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">IO.Promise.resultD {<span class="var token" data-binding="var-_uniq.2313" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.2315" data-verso-hover="3257">promise</span> : <a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2313" data-verso-hover="162">α</span>) (<span class="var token" data-binding="var-_uniq.2316" data-verso-hover="46">dflt</span> : <span class="var token" data-binding="var-_uniq.2313" data-verso-hover="162">α</span>) :
  <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.2313" data-verso-hover="162">α</span></div><div class="narrow-only">IO.Promise.resultD {<span class="var token" data-binding="var-_uniq.2313" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  (<span class="var token" data-binding="var-_uniq.2315" data-verso-hover="3257">promise</span> : <a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2313" data-verso-hover="162">α</span>) (<span class="var token" data-binding="var-_uniq.2316" data-verso-hover="46">dflt</span> : <span class="var token" data-binding="var-_uniq.2313" data-verso-hover="162">α</span>) :
  <a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.2313" data-verso-hover="162">α</span></div></pre><div class="text">
                  <p>
                    Like <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise.result</span></code>, but resolves to <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2303" data-verso-hover="46">dflt</span></code> if the promise is dropped without ever being resolved.</p>
                  </div>
                </div>
              <div class="namedocs" id="IO___Promise___resolve">
                <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=IO.Promise.resolve" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">IO.Promise.resolve {<span class="var token" data-binding="var-_uniq.2334" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.2335" data-verso-hover="46">value</span> : <span class="var token" data-binding="var-_uniq.2334" data-verso-hover="162">α</span>) (<span class="var token" data-binding="var-_uniq.2337" data-verso-hover="3257">promise</span> : <a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2334" data-verso-hover="162">α</span>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div><div class="narrow-only">IO.Promise.resolve {<span class="var token" data-binding="var-_uniq.2334" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.2335" data-verso-hover="46">value</span> : <span class="var token" data-binding="var-_uniq.2334" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.2337" data-verso-hover="3257">promise</span> : <a href="IO/Tasks-and-Threads/#IO___Promise"><span class="const token" data-binding="const-IO.Promise" data-verso-hover="3252">IO.Promise</span></a> <span class="var token" data-binding="var-_uniq.2334" data-verso-hover="162">α</span>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div></pre><div class="text">
                  <p>
                    Resolves a <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Promise</span></code>.</p>
                  <p>
                    Only the first call to this function has an effect.</p>
                  </div>
                </div>
              </section>
            <section>
              <h2 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Communication-Between-Tasks">
                15.11.6. Communication Between Tasks</h2>
              <p>
                In addition to the types and operations described in this section, <code class="hl lean inline" data-lean-context="examples"><a href="IO/Mutable-References/#IO___Ref"><span class="const token" data-binding="const-IO.Ref" data-verso-hover="2996">IO.Ref</span></a></code> can be used as a lock.
Taking the reference (using <code class="hl lean inline" data-lean-context="examples"><a href="IO/Mutable-References/#ST___Ref___take"><span class="const token" data-binding="const-ST.Ref.take" data-verso-hover="3021">take</span></a></code>) causes other threads to block when reading until the reference is <code class="hl lean inline" data-lean-context="examples"><a href="IO/Mutable-References/#ST___Ref___set"><span class="const token" data-binding="const-ST.Ref.set" data-verso-hover="3003">set</span></a></code> again.
This pattern is described in <a href="IO/Mutable-References/#ref-locks">the section on reference cells</a>.</p>
              <section>
                <h3 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Communication-Between-Tasks--Channels">
                  15.11.6.1. Channels</h3>
                <p>
                  The types and functions in this section are available after importing <code>Std.Sync.Channel</code>.</p>
                <div class="namedocs" id="Std___Channel">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Channel" title="Permalink">🔗</a></span><span class="label">structure</span><pre class="signature hl lean block"><div class="wide-only">Std.Channel (<span class="var token" data-binding="var-_uniq.2377" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div><div class="narrow-only">Std.Channel (<span class="var token" data-binding="var-_uniq.2377" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div></pre><div class="text">
                    <p>
                      A multi-producer multi-consumer FIFO channel that offers both bounded and unbounded buffering
and an asynchronous API, to switch into synchronous mode use <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Channel.sync</span></code>.</p>
                    <p>
                      If a channel needs to be closed to indicate some sort of completion event use <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Std___CloseableChannel"><span class="const token" data-binding="const-Std.CloseableChannel" data-verso-hover="3258">Std.CloseableChannel</span></a></code>
instead. Note that <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Std___CloseableChannel"><span class="const token" data-binding="const-Std.CloseableChannel" data-verso-hover="3258">Std.CloseableChannel</span></a></code> introduces a need for error handling in some cases, thus
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a></code> is usually easier to use if applicable.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Channel___new">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Channel.new" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.Channel.new {<span class="var token" data-binding="var-_uniq.2679" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.2681" data-verso-hover="3260">capacity</span> : <a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option" data-verso-hover="45">Option</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> := <a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.none" data-verso-hover="48">none</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a> <span class="var token" data-binding="var-_uniq.2679" data-verso-hover="162">α</span>)</div><div class="narrow-only">Std.Channel.new {<span class="var token" data-binding="var-_uniq.2679" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  (<span class="var token" data-binding="var-_uniq.2681" data-verso-hover="3260">capacity</span> : <a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option" data-verso-hover="45">Option</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> := <a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.none" data-verso-hover="48">none</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a> <span class="var token" data-binding="var-_uniq.2679" data-verso-hover="162">α</span>)</div></pre><div class="text">
                    <p>
                      Create a new channel, if:</p>
                    <ul>
                      <li>
                        <p>
                          <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2382" data-verso-hover="3260">capacity</span></code> is <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.none" data-verso-hover="48">none</span></a></code> it will be unbounded (the default)</p>
                        </li>
                      <li>
                        <p>
                          <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2382" data-verso-hover="3260">capacity</span></code> is <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.some" data-verso-hover="47">some</span></a> <span class="typed token" data-binding="" data-verso-hover="7">0</span></code> it will always force a rendezvous between sender and receiver</p>
                        </li>
                      <li>
                        <p>
                          <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2382" data-verso-hover="3260">capacity</span></code> is <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.some" data-verso-hover="47">some</span></a> <span class="var token" data-binding="var-_uniq.2417" data-verso-hover="3261">n</span></code> with <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">n</span> <span class="unknown token" data-binding="">&gt;</span> <span class="unknown token" data-binding="">0</span></code> it will use a buffer of size <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2417" data-verso-hover="3262">n</span></code> and begin blocking once it
is filled</p>
                        </li>
                      </ul>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Channel___send">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Channel.send" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.Channel.send {<span class="var token" data-binding="var-_uniq.2687" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.2689" data-verso-hover="3263">ch</span> : <a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a> <span class="var token" data-binding="var-_uniq.2687" data-verso-hover="162">α</span>) (<span class="var token" data-binding="var-_uniq.2690" data-verso-hover="46">v</span> : <span class="var token" data-binding="var-_uniq.2687" data-verso-hover="162">α</span>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)</div><div class="narrow-only">Std.Channel.send {<span class="var token" data-binding="var-_uniq.2687" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  (<span class="var token" data-binding="var-_uniq.2689" data-verso-hover="3263">ch</span> : <a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a> <span class="var token" data-binding="var-_uniq.2687" data-verso-hover="162">α</span>) (<span class="var token" data-binding="var-_uniq.2690" data-verso-hover="46">v</span> : <span class="var token" data-binding="var-_uniq.2687" data-verso-hover="162">α</span>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)</div></pre><div class="text">
                    <p>
                      Send a value through the channel, returning a task that will resolve once the transmission could be
completed.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Channel___recv">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Channel.recv" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.Channel.recv {<span class="var token" data-binding="var-_uniq.2696" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} [<a href="Type-Classes/Basic-Classes/#Inhabited___mk"><span class="const token" data-binding="const-Inhabited" data-verso-hover="173">Inhabited</span></a> <span class="var token" data-binding="var-_uniq.2696" data-verso-hover="162">α</span>] (<span class="var token" data-binding="var-_uniq.2699" data-verso-hover="3263">ch</span> : <a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a> <span class="var token" data-binding="var-_uniq.2696" data-verso-hover="162">α</span>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.2696" data-verso-hover="162">α</span>)</div><div class="narrow-only">Std.Channel.recv {<span class="var token" data-binding="var-_uniq.2696" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} [<a href="Type-Classes/Basic-Classes/#Inhabited___mk"><span class="const token" data-binding="const-Inhabited" data-verso-hover="173">Inhabited</span></a> <span class="var token" data-binding="var-_uniq.2696" data-verso-hover="162">α</span>]
  (<span class="var token" data-binding="var-_uniq.2699" data-verso-hover="3263">ch</span> : <a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a> <span class="var token" data-binding="var-_uniq.2696" data-verso-hover="162">α</span>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <span class="var token" data-binding="var-_uniq.2696" data-verso-hover="162">α</span>)</div></pre><div class="text">
                    <p>
                      Receive a value from the channel, returning a task that will resolve once the transmission could be
completed. Note that the task may resolve to <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.none" data-verso-hover="48">none</span></a></code> if the channel was closed before it could be
completed.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Channel___forAsync">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Channel.forAsync" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">Std.Channel.forAsync {<span class="var token" data-binding="var-_uniq.2737" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} [<a href="Type-Classes/Basic-Classes/#Inhabited___mk"><span class="const token" data-binding="const-Inhabited" data-verso-hover="173">Inhabited</span></a> <span class="var token" data-binding="var-_uniq.2737" data-verso-hover="162">α</span>] (<span class="var token" data-binding="var-_uniq.2740" data-verso-hover="3245">f</span> : <span class="var token" data-binding="var-_uniq.2737" data-verso-hover="162">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)
  (<span class="var token" data-binding="var-_uniq.2743" data-verso-hover="3263">ch</span> : <a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a> <span class="var token" data-binding="var-_uniq.2737" data-verso-hover="162">α</span>) (<span class="var token" data-binding="var-_uniq.2744" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> := <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)</div><div class="narrow-only">Std.Channel.forAsync {<span class="var token" data-binding="var-_uniq.2737" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  [<a href="Type-Classes/Basic-Classes/#Inhabited___mk"><span class="const token" data-binding="const-Inhabited" data-verso-hover="173">Inhabited</span></a> <span class="var token" data-binding="var-_uniq.2737" data-verso-hover="162">α</span>] (<span class="var token" data-binding="var-_uniq.2740" data-verso-hover="3245">f</span> : <span class="var token" data-binding="var-_uniq.2737" data-verso-hover="162">α</span> → <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)
  (<span class="var token" data-binding="var-_uniq.2743" data-verso-hover="3263">ch</span> : <a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a> <span class="var token" data-binding="var-_uniq.2737" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.2744" data-verso-hover="3224">prio</span> : <a href="IO/Tasks-and-Threads/#Task___Priority"><span class="const token" data-binding="const-Task.Priority" data-verso-hover="3222">Task.Priority</span></a> :=
    <a href="IO/Tasks-and-Threads/#Task___Priority___default"><span class="const token" data-binding="const-Task.Priority.default" data-verso-hover="3225">Task.Priority.default</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Task"><span class="const token" data-binding="const-Task" data-verso-hover="3216">Task</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a>)</div></pre><div class="text">
                    <p>
                      <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2703" data-verso-hover="3263">ch</span><span class="unknown token" data-binding="">.</span><a href="IO/Tasks-and-Threads/#Std___Channel___forAsync"><span class="const token" data-binding="const-Std.Channel.forAsync" data-verso-hover="3264">forAsync</span></a> <span class="var token" data-binding="var-_uniq.2702" data-verso-hover="3245">f</span></code> calls <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2702" data-verso-hover="3245">f</span></code> for every message received on <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2703" data-verso-hover="3263">ch</span></code>.</p>
                    <p>
                      Note that if this function is called twice, each message will only arrive at exactly one invocation.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Channel___sync">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Channel.sync" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.Channel.sync {<span class="var token" data-binding="var-_uniq.2747" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.2749" data-verso-hover="3263">ch</span> : <a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a> <span class="var token" data-binding="var-_uniq.2747" data-verso-hover="162">α</span>) : <a href="IO/Tasks-and-Threads/#Std___Channel___Sync"><span class="const token" data-binding="const-Std.Channel.Sync" data-verso-hover="3265">Std.Channel.Sync</span></a> <span class="var token" data-binding="var-_uniq.2747" data-verso-hover="162">α</span></div><div class="narrow-only">Std.Channel.sync {<span class="var token" data-binding="var-_uniq.2747" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  (<span class="var token" data-binding="var-_uniq.2749" data-verso-hover="3263">ch</span> : <a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a> <span class="var token" data-binding="var-_uniq.2747" data-verso-hover="162">α</span>) :
  <a href="IO/Tasks-and-Threads/#Std___Channel___Sync"><span class="const token" data-binding="const-Std.Channel.Sync" data-verso-hover="3265">Std.Channel.Sync</span></a> <span class="var token" data-binding="var-_uniq.2747" data-verso-hover="162">α</span></div></pre><div class="text">
                    <p>
                      This function is a no-op and just a convenient way to expose the synchronous API of the channel.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Channel___Sync">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Channel.Sync" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.Channel.Sync (<span class="var token" data-binding="var-_uniq.2756" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div><div class="narrow-only">Std.Channel.Sync (<span class="var token" data-binding="var-_uniq.2756" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div></pre><div class="text">
                    <p>
                      A multi-producer multi-consumer FIFO channel that offers both bounded and unbounded buffering
and a synchronous API. This type acts as a convenient layer to use a channel in a blocking fashion
and is not actually different from the original channel.</p>
                    <p>
                      If a channel needs to be closed to indicate some sort of completion event use
<code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-Std.CloseableChannel.Sync" data-verso-hover="3266">Std.CloseableChannel.Sync</span></code> instead. Note that <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-Std.CloseableChannel.Sync" data-verso-hover="3266">Std.CloseableChannel.Sync</span></code> introduces a need for error
handling in some cases, thus <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Std___Channel___Sync"><span class="const token" data-binding="const-Std.Channel.Sync" data-verso-hover="3265">Std.Channel.Sync</span></a></code> is usually easier to use if applicable.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___CloseableChannel">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.CloseableChannel" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.CloseableChannel (<span class="var token" data-binding="var-_uniq.2771" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div><div class="narrow-only">Std.CloseableChannel (<span class="var token" data-binding="var-_uniq.2771" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div></pre><div class="text">
                    <p>
                      A multi-producer multi-consumer FIFO channel that offers both bounded and unbounded buffering
and an asynchronous API, to switch into synchronous mode use <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">CloseableChannel.sync</span></code>.</p>
                    <p>
                      Additionally <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Std___CloseableChannel"><span class="const token" data-binding="const-Std.CloseableChannel" data-verso-hover="3258">Std.CloseableChannel</span></a></code> can be closed if necessary, unlike <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a></code>.
This introduces a need for error handling in some cases, thus it is usually easier to use
<code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Tasks-and-Threads/#Std___Channel"><span class="const token" data-binding="const-Std.Channel" data-verso-hover="3259">Std.Channel</span></a></code> if applicable.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___CloseableChannel___new">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.CloseableChannel.new" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.CloseableChannel.new {<span class="var token" data-binding="var-_uniq.3068" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.3070" data-verso-hover="3260">capacity</span> : <a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option" data-verso-hover="45">Option</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> := <a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.none" data-verso-hover="48">none</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Std___CloseableChannel"><span class="const token" data-binding="const-Std.CloseableChannel" data-verso-hover="3258">Std.CloseableChannel</span></a> <span class="var token" data-binding="var-_uniq.3068" data-verso-hover="162">α</span>)</div><div class="narrow-only">Std.CloseableChannel.new {<span class="var token" data-binding="var-_uniq.3068" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  (<span class="var token" data-binding="var-_uniq.3070" data-verso-hover="3260">capacity</span> : <a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option" data-verso-hover="45">Option</span></a> <a href="Basic-Types/Natural-Numbers/#Nat___zero"><span class="const token" data-binding="const-Nat" data-verso-hover="22">Nat</span></a> := <a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.none" data-verso-hover="48">none</span></a>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Std___CloseableChannel"><span class="const token" data-binding="const-Std.CloseableChannel" data-verso-hover="3258">Std.CloseableChannel</span></a> <span class="var token" data-binding="var-_uniq.3068" data-verso-hover="162">α</span>)</div></pre><div class="text">
                    <p>
                      Create a new channel, if:</p>
                    <ul>
                      <li>
                        <p>
                          <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2776" data-verso-hover="3260">capacity</span></code> is <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.none" data-verso-hover="48">none</span></a></code> it will be unbounded (the default)</p>
                        </li>
                      <li>
                        <p>
                          <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2776" data-verso-hover="3260">capacity</span></code> is <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.some" data-verso-hover="47">some</span></a> <span class="typed token" data-binding="" data-verso-hover="7">0</span></code> it will always force a rendezvous between sender and receiver</p>
                        </li>
                      <li>
                        <p>
                          <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2776" data-verso-hover="3260">capacity</span></code> is <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Basic-Types/Optional-Values/#Option___none"><span class="const token" data-binding="const-Option.some" data-verso-hover="47">some</span></a> <span class="var token" data-binding="var-_uniq.2811" data-verso-hover="3267">n</span></code> with <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">n</span> <span class="unknown token" data-binding="">&gt;</span> <span class="unknown token" data-binding="">0</span></code> it will use a buffer of size <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.2811" data-verso-hover="3268">n</span></code> and begin blocking once it
is filled</p>
                        </li>
                      </ul>
                    </div>
                  </div>
                <p>
                  Synchronous channels can also be read using <span class="hl lean keyword-of"><code class="hover-info"><code>Lean.Parser.Term.doFor : doElem</code><span class="sep"></span><code class="docstring">`for x in e do s`  iterates over `e` assuming `e`'s type has an instance of the `ForIn` typeclass.
`break` and `continue` are supported inside `for` loops.
`for x in e, x2 in e2, ... do s` iterates of the given collections in parallel,
until at least one of them is exhausted.
The types of `e2` etc. must implement the `ToStream` typeclass.
</code></code><code class="kw">for</code></span> loops.
In particular, there is an instance of type <code class="hl lean inline" data-lean-context="examples"><a href="Functors___-Monads-and--do--Notation/Syntax/#ForIn___mk"><span class="const token" data-binding="const-ForIn" data-verso-hover="2788">ForIn</span></a> <span class="var token" data-binding="var-_uniq.3075" data-verso-hover="2829">m</span> <span class="unknown token" data-binding="">(</span><a href="IO/Tasks-and-Threads/#Std___Channel___Sync"><span class="const token" data-binding="const-Std.Channel.Sync" data-verso-hover="3265">Std.Channel.Sync</span></a> <span class="var token" data-binding="var-_uniq.3077" data-verso-hover="162">α</span><span class="unknown token" data-binding="">)</span> <span class="var token" data-binding="var-_uniq.3077" data-verso-hover="162">α</span></code> for every monad <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3157" data-verso-hover="2829">m</span></code> with a <code class="hl lean inline" data-lean-context="examples"><a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT" data-verso-hover="79">MonadLiftT</span></a> <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.3178" data-verso-hover="2829">m</span></code> instance and <code class="hl lean inline" data-lean-context="examples"><span class="var token" data-binding="var-_uniq.3223" data-verso-hover="162">α</span></code> with an <code class="hl lean inline" data-lean-context="examples"><a href="Type-Classes/Basic-Classes/#Inhabited___mk"><span class="const token" data-binding="const-Inhabited" data-verso-hover="173">Inhabited</span></a> <span class="var token" data-binding="var-_uniq.3243" data-verso-hover="162">α</span></code> instance.</p>
                </section>
              <section>
                <h3 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Communication-Between-Tasks--Mutexes">
                  15.11.6.2. Mutexes</h3>
                <p>
                  The types and functions in this section are available after importing <code>Std.Sync.Mutex</code>.</p>
                <div class="namedocs" id="Std___Mutex">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Mutex" title="Permalink">🔗</a></span><span class="label">type</span><pre class="signature hl lean block"><div class="wide-only">Std.Mutex (<span class="var token" data-binding="var-_uniq.3315" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div><div class="narrow-only">Std.Mutex (<span class="var token" data-binding="var-_uniq.3315" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div></pre><div class="text">
                    <p>
                      Mutual exclusion primitive (lock) guarding shared state of type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3267" data-verso-hover="162">α</span></code>.</p>
                    <p>
                      The type <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Mutex</span> <span class="unknown token" data-binding="">α</span></code> is similar to <code class="hl lean inline" data-lean-context="docstring-examples"><a href="IO/Mutable-References/#IO___Ref"><span class="const token" data-binding="const-IO.Ref" data-verso-hover="2996">IO.Ref</span></a> <span class="var token" data-binding="var-_uniq.3268" data-verso-hover="162">α</span></code>, except that concurrent accesses are guarded by a mutex
instead of atomic pointer operations and busy-waiting.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Mutex___new">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Mutex.new" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.Mutex.new {<span class="var token" data-binding="var-_uniq.3319" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.3320" data-verso-hover="46">a</span> : <span class="var token" data-binding="var-_uniq.3319" data-verso-hover="162">α</span>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Std___Mutex"><span class="const token" data-binding="const-Std.Mutex" data-verso-hover="3269">Std.Mutex</span></a> <span class="var token" data-binding="var-_uniq.3319" data-verso-hover="162">α</span>)</div><div class="narrow-only">Std.Mutex.new {<span class="var token" data-binding="var-_uniq.3319" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} (<span class="var token" data-binding="var-_uniq.3320" data-verso-hover="46">a</span> : <span class="var token" data-binding="var-_uniq.3319" data-verso-hover="162">α</span>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> (<a href="IO/Tasks-and-Threads/#Std___Mutex"><span class="const token" data-binding="const-Std.Mutex" data-verso-hover="3269">Std.Mutex</span></a> <span class="var token" data-binding="var-_uniq.3319" data-verso-hover="162">α</span>)</div></pre><div class="text">
                    <p>
                      Creates a new mutex.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Mutex___atomically">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Mutex.atomically" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.Mutex.atomically {<span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span> → <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} {<span class="var token" data-binding="var-_uniq.4187" data-verso-hover="162">α </span><span class="var token" data-binding="var-_uniq.4188" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} [<a href="Functors___-Monads-and--do--Notation/#Monad___mk"><span class="const token" data-binding="const-Monad" data-verso-hover="239">Monad</span></a> <span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span>]
  [<a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT" data-verso-hover="79">MonadLiftT</span></a> <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span>] [<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#MonadFinally___mk"><span class="const token" data-binding="const-MonadFinally" data-verso-hover="2717">MonadFinally</span></a> <span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span>] (<span class="var token" data-binding="var-_uniq.4194" data-verso-hover="3270">mutex</span> : <a href="IO/Tasks-and-Threads/#Std___Mutex"><span class="const token" data-binding="const-Std.Mutex" data-verso-hover="3269">Std.Mutex</span></a> <span class="var token" data-binding="var-_uniq.4187" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.4198" data-verso-hover="3271">k</span> : <a href="IO/Tasks-and-Threads/#Std___AtomicT"><span class="const token" data-binding="const-Std.AtomicT" data-verso-hover="3272">Std.AtomicT</span></a> <span class="var token" data-binding="var-_uniq.4187" data-verso-hover="162">α</span> <span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span> <span class="var token" data-binding="var-_uniq.4188" data-verso-hover="162">β</span>) : <span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span> <span class="var token" data-binding="var-_uniq.4188" data-verso-hover="162">β</span></div><div class="narrow-only">Std.Mutex.atomically {<span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span> → <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  {<span class="var token" data-binding="var-_uniq.4187" data-verso-hover="162">α </span><span class="var token" data-binding="var-_uniq.4188" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} [<a href="Functors___-Monads-and--do--Notation/#Monad___mk"><span class="const token" data-binding="const-Monad" data-verso-hover="239">Monad</span></a> <span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span>]
  [<a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT" data-verso-hover="79">MonadLiftT</span></a> <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span>] [<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#MonadFinally___mk"><span class="const token" data-binding="const-MonadFinally" data-verso-hover="2717">MonadFinally</span></a> <span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span>]
  (<span class="var token" data-binding="var-_uniq.4194" data-verso-hover="3270">mutex</span> : <a href="IO/Tasks-and-Threads/#Std___Mutex"><span class="const token" data-binding="const-Std.Mutex" data-verso-hover="3269">Std.Mutex</span></a> <span class="var token" data-binding="var-_uniq.4187" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.4198" data-verso-hover="3271">k</span> : <a href="IO/Tasks-and-Threads/#Std___AtomicT"><span class="const token" data-binding="const-Std.AtomicT" data-verso-hover="3272">Std.AtomicT</span></a> <span class="var token" data-binding="var-_uniq.4187" data-verso-hover="162">α</span> <span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span> <span class="var token" data-binding="var-_uniq.4188" data-verso-hover="162">β</span>) : <span class="var token" data-binding="var-_uniq.4186" data-verso-hover="78">m</span> <span class="var token" data-binding="var-_uniq.4188" data-verso-hover="162">β</span></div></pre><div class="text">
                    <p>
                      <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3328" data-verso-hover="3270">mutex</span><span class="unknown token" data-binding="">.</span><a href="IO/Tasks-and-Threads/#Std___Mutex___atomically"><span class="const token" data-binding="const-Std.Mutex.atomically" data-verso-hover="3273">atomically</span></a> <span class="var token" data-binding="var-_uniq.3329" data-verso-hover="3271">k</span></code> runs <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.3329" data-verso-hover="3271">k</span></code> with access to the mutex's state while locking the mutex.</p>
                    <p>
                      Calling <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">mutex.atomically</span></code> while already holding the underlying <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">BaseMutex</span></code> in the same thread
is undefined behavior. If this is unavoidable in your code, consider using <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">RecursiveMutex</span></code>.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Mutex___atomicallyOnce">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Mutex.atomicallyOnce" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.Mutex.atomicallyOnce {<span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span> → <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} {<span class="var token" data-binding="var-_uniq.5065" data-verso-hover="162">α </span><span class="var token" data-binding="var-_uniq.5066" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} [<a href="Functors___-Monads-and--do--Notation/#Monad___mk"><span class="const token" data-binding="const-Monad" data-verso-hover="239">Monad</span></a> <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span>]
  [<a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT" data-verso-hover="79">MonadLiftT</span></a> <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span>] [<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#MonadFinally___mk"><span class="const token" data-binding="const-MonadFinally" data-verso-hover="2717">MonadFinally</span></a> <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span>] (<span class="var token" data-binding="var-_uniq.5072" data-verso-hover="3270">mutex</span> : <a href="IO/Tasks-and-Threads/#Std___Mutex"><span class="const token" data-binding="const-Std.Mutex" data-verso-hover="3269">Std.Mutex</span></a> <span class="var token" data-binding="var-_uniq.5065" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.5073" data-verso-hover="3274">condvar</span> : <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a>) (<span class="var token" data-binding="var-_uniq.5077" data-verso-hover="3276">pred</span> : <a href="IO/Tasks-and-Threads/#Std___AtomicT"><span class="const token" data-binding="const-Std.AtomicT" data-verso-hover="3272">Std.AtomicT</span></a> <span class="var token" data-binding="var-_uniq.5065" data-verso-hover="162">α</span> <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a>)
  (<span class="var token" data-binding="var-_uniq.5081" data-verso-hover="3271">k</span> : <a href="IO/Tasks-and-Threads/#Std___AtomicT"><span class="const token" data-binding="const-Std.AtomicT" data-verso-hover="3272">Std.AtomicT</span></a> <span class="var token" data-binding="var-_uniq.5065" data-verso-hover="162">α</span> <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span> <span class="var token" data-binding="var-_uniq.5066" data-verso-hover="162">β</span>) : <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span> <span class="var token" data-binding="var-_uniq.5066" data-verso-hover="162">β</span></div><div class="narrow-only">Std.Mutex.atomicallyOnce {<span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span> → <span class="sort token" data-binding="" data-verso-hover="50">Type</span>}
  {<span class="var token" data-binding="var-_uniq.5065" data-verso-hover="162">α </span><span class="var token" data-binding="var-_uniq.5066" data-verso-hover="162">β</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>} [<a href="Functors___-Monads-and--do--Notation/#Monad___mk"><span class="const token" data-binding="const-Monad" data-verso-hover="239">Monad</span></a> <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span>]
  [<a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT" data-verso-hover="79">MonadLiftT</span></a> <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span>] [<a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#MonadFinally___mk"><span class="const token" data-binding="const-MonadFinally" data-verso-hover="2717">MonadFinally</span></a> <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span>]
  (<span class="var token" data-binding="var-_uniq.5072" data-verso-hover="3270">mutex</span> : <a href="IO/Tasks-and-Threads/#Std___Mutex"><span class="const token" data-binding="const-Std.Mutex" data-verso-hover="3269">Std.Mutex</span></a> <span class="var token" data-binding="var-_uniq.5065" data-verso-hover="162">α</span>)
  (<span class="var token" data-binding="var-_uniq.5073" data-verso-hover="3274">condvar</span> : <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a>)
  (<span class="var token" data-binding="var-_uniq.5077" data-verso-hover="3276">pred</span> : <a href="IO/Tasks-and-Threads/#Std___AtomicT"><span class="const token" data-binding="const-Std.AtomicT" data-verso-hover="3272">Std.AtomicT</span></a> <span class="var token" data-binding="var-_uniq.5065" data-verso-hover="162">α</span> <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a>)
  (<span class="var token" data-binding="var-_uniq.5081" data-verso-hover="3271">k</span> : <a href="IO/Tasks-and-Threads/#Std___AtomicT"><span class="const token" data-binding="const-Std.AtomicT" data-verso-hover="3272">Std.AtomicT</span></a> <span class="var token" data-binding="var-_uniq.5065" data-verso-hover="162">α</span> <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span> <span class="var token" data-binding="var-_uniq.5066" data-verso-hover="162">β</span>) : <span class="var token" data-binding="var-_uniq.5064" data-verso-hover="78">m</span> <span class="var token" data-binding="var-_uniq.5066" data-verso-hover="162">β</span></div></pre><div class="text">
                    <p>
                      <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4205" data-verso-hover="3270">mutex</span><span class="unknown token" data-binding="">.</span><a href="IO/Tasks-and-Threads/#Std___Mutex___atomicallyOnce"><span class="const token" data-binding="const-Std.Mutex.atomicallyOnce" data-verso-hover="3277">atomicallyOnce</span></a> <span class="var token" data-binding="var-_uniq.4206" data-verso-hover="3274">condvar</span> <span class="var token" data-binding="var-_uniq.4207" data-verso-hover="3276">pred</span> <span class="var token" data-binding="var-_uniq.4208" data-verso-hover="3271">k</span></code> runs <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4208" data-verso-hover="3271">k</span></code>, waiting on <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4206" data-verso-hover="3274">condvar</span></code> until <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4207" data-verso-hover="3276">pred</span></code> returns true.
Both <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4208" data-verso-hover="3271">k</span></code> and <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.4207" data-verso-hover="3276">pred</span></code> have access to the mutex's state.</p>
                    <p>
                      Calling <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">mutex.atomicallyOnce</span></code> while already holding the underlying <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">BaseMutex</span></code> in the same thread
is undefined behavior. If this is unavoidable in your code, consider using <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">RecursiveMutex</span></code>.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___AtomicT">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.AtomicT" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.AtomicT (<span class="var token" data-binding="var-_uniq.5216" data-verso-hover="162">σ</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) (<span class="var token" data-binding="var-_uniq.5218" data-verso-hover="78">m</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span> → <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) (<span class="var token" data-binding="var-_uniq.5219" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div><div class="narrow-only">Std.AtomicT (<span class="var token" data-binding="var-_uniq.5216" data-verso-hover="162">σ</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) (<span class="var token" data-binding="var-_uniq.5218" data-verso-hover="78">m</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span> → <span class="sort token" data-binding="" data-verso-hover="50">Type</span>)
  (<span class="var token" data-binding="var-_uniq.5219" data-verso-hover="162">α</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span>) : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div></pre><div class="text">
                    <p>
                      <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">AtomicT</span> <span class="unknown token" data-binding="">α</span> <span class="unknown token" data-binding="">m</span></code> is the monad that can be atomically executed inside mutual exclusion primitives like
<code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Mutex</span> <span class="unknown token" data-binding="">α</span></code> with outside monad <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.5083" data-verso-hover="78">m</span></code>.
The action has access to the state <code class="hl lean inline" data-lean-context="docstring-examples"><span class="var token" data-binding="var-_uniq.5084" data-verso-hover="162">α</span></code> of the mutex (via <code class="hl lean inline" data-lean-context="docstring-examples"><span class="const token" data-binding="const-MonadState.get" data-verso-hover="819">get</span></code> and <code class="hl lean inline" data-lean-context="docstring-examples"><a href="Functors___-Monads-and--do--Notation/Varieties-of-Monads/#MonadStateOf___mk"><span class="const token" data-binding="const-MonadStateOf.set" data-verso-hover="2801">set</span></a></code>).</p>
                    </div>
                  </div>
                </section>
              <section>
                <h3 id="The-Lean-Language-Reference--IO--Tasks-and-Threads--Communication-Between-Tasks--Condition-Variables">
                  15.11.6.3. Condition Variables</h3>
                <p>
                  The types and functions in this section are available after importing <code>Std.Sync.Mutex</code>.</p>
                <div class="namedocs" id="Std___Condvar">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Condvar" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.Condvar : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div><div class="narrow-only">Std.Condvar : <span class="sort token" data-binding="" data-verso-hover="50">Type</span></div></pre><div class="text">
                    <p>
                      Condition variable, a synchronization primitive to be used with a <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">BaseMutex</span></code> or <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Mutex</span></code>.</p>
                    <p>
                      The thread that wants to modify the shared variable must:</p>
                    <ol start="1">
                      <li>
                        <p>
                          Lock the <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">BaseMutex</span></code> or <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Mutex</span></code></p>
                        </li>
                      <li>
                        <p>
                          Work on the shared variable</p>
                        </li>
                      <li>
                        <p>
                          Call <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Condvar.notifyOne</span></code> or <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Condvar.notifyAll</span></code> after it is done. Note that this may be done
before or after the mutex is unlocked.</p>
                        </li>
                      </ol>
                    <p>
                      If working with a <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Mutex</span></code> the thread that waits on the <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Condvar</span></code> can use <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Mutex.atomicallyOnce</span></code>
to wait until a condition is true. If working with a <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">BaseMutex</span></code> it must:</p>
                    <ol start="1">
                      <li>
                        <p>
                          Lock the <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">BaseMutex</span></code>.</p>
                        </li>
                      <li>
                        <p>
                          Do one of the following:</p>
                        </li>
                      </ol>
                    <ul>
                      <li>
                        <p>
                          Use <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Condvar.waitUntil</span></code> to (potentially repeatedly wait) on the condition variable until
the condition is true.</p>
                        </li>
                      <li>
                        <p>
                          Implement the waiting manually by:</p>
                        <ol start="1">
                          <li>
                            <p>
                              Checking the condition</p>
                            </li>
                          <li>
                            <p>
                              Calling <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">Condvar.wait</span></code> which releases the <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">BaseMutex</span></code> and suspends execution until the
condition variable is notified.</p>
                            </li>
                          <li>
                            <p>
                              Check the condition and resume waiting if not satisfied.</p>
                            </li>
                          </ol>
                        </li>
                      </ul>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Condvar___new">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Condvar.new" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">Std.Condvar.new : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a></div><div class="narrow-only">Std.Condvar.new : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a></div></pre><div class="text">
                    <p>
                      Creates a new condition variable.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Condvar___wait">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Condvar.wait" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">Std.Condvar.wait (<span class="var token" data-binding="var-_uniq.5368" data-verso-hover="3274">condvar</span> : <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a>) (<span class="var token" data-binding="var-_uniq.5369" data-verso-hover="3278">mutex</span> : <span class="const token" data-binding="const-Std.BaseMutex" data-verso-hover="3279">Std.BaseMutex</span>) :
  <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div><div class="narrow-only">Std.Condvar.wait (<span class="var token" data-binding="var-_uniq.5368" data-verso-hover="3274">condvar</span> : <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a>)
  (<span class="var token" data-binding="var-_uniq.5369" data-verso-hover="3278">mutex</span> : <span class="const token" data-binding="const-Std.BaseMutex" data-verso-hover="3279">Std.BaseMutex</span>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div></pre><div class="text">
                    <p>
                      Waits until another thread calls <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">notifyOne</span></code> or <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">notifyAll</span></code>.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Condvar___notifyOne">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Condvar.notifyOne" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">Std.Condvar.notifyOne (<span class="var token" data-binding="var-_uniq.5381" data-verso-hover="3274">condvar</span> : <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div><div class="narrow-only">Std.Condvar.notifyOne
  (<span class="var token" data-binding="var-_uniq.5381" data-verso-hover="3274">condvar</span> : <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div></pre><div class="text">
                    <p>
                      Wakes up a single other thread executing <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">wait</span></code>.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Condvar___notifyAll">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Condvar.notifyAll" title="Permalink">🔗</a></span><span class="label">opaque</span><pre class="signature hl lean block"><div class="wide-only">Std.Condvar.notifyAll (<span class="var token" data-binding="var-_uniq.5393" data-verso-hover="3274">condvar</span> : <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div><div class="narrow-only">Std.Condvar.notifyAll
  (<span class="var token" data-binding="var-_uniq.5393" data-verso-hover="3274">condvar</span> : <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a>) : <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div></pre><div class="text">
                    <p>
                      Wakes up all other threads executing <code class="hl lean inline" data-lean-context="docstring-examples"><span class="unknown token" data-binding="">wait</span></code>.</p>
                    </div>
                  </div>
                <div class="namedocs" id="Std___Condvar___waitUntil">
                  <span class="permalink-widget block"><a href="find/?domain=Verso.Genre.Manual.doc&name=Std.Condvar.waitUntil" title="Permalink">🔗</a></span><span class="label">def</span><pre class="signature hl lean block"><div class="wide-only">Std.Condvar.waitUntil.{u_1} {<span class="var token" data-binding="var-_uniq.5401" data-verso-hover="240">m</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span> → <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} [<a href="Functors___-Monads-and--do--Notation/#Monad___mk"><span class="const token" data-binding="const-Monad" data-verso-hover="239">Monad</span></a> <span class="var token" data-binding="var-_uniq.5401" data-verso-hover="240">m</span>]
  [<a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT" data-verso-hover="79">MonadLiftT</span></a> <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.5401" data-verso-hover="240">m</span>] (<span class="var token" data-binding="var-_uniq.5405" data-verso-hover="3274">condvar</span> : <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a>) (<span class="var token" data-binding="var-_uniq.5406" data-verso-hover="3278">mutex</span> : <span class="const token" data-binding="const-Std.BaseMutex" data-verso-hover="3279">Std.BaseMutex</span>)
  (<span class="var token" data-binding="var-_uniq.5407" data-verso-hover="2833">pred</span> : <span class="var token" data-binding="var-_uniq.5401" data-verso-hover="240">m</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a>) : <span class="var token" data-binding="var-_uniq.5401" data-verso-hover="240">m</span> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div><div class="narrow-only">Std.Condvar.waitUntil.{u_1}
  {<span class="var token" data-binding="var-_uniq.5401" data-verso-hover="240">m</span> : <span class="sort token" data-binding="" data-verso-hover="50">Type</span> → <span class="sort token" data-binding="" data-verso-hover="50">Type u_1</span>} [<a href="Functors___-Monads-and--do--Notation/#Monad___mk"><span class="const token" data-binding="const-Monad" data-verso-hover="239">Monad</span></a> <span class="var token" data-binding="var-_uniq.5401" data-verso-hover="240">m</span>]
  [<a href="Functors___-Monads-and--do--Notation/Lifting-Monads/#MonadLiftT___mk"><span class="const token" data-binding="const-MonadLiftT" data-verso-hover="79">MonadLiftT</span></a> <a href="IO/Logical-Model/#BaseIO"><span class="const token" data-binding="const-BaseIO" data-verso-hover="1338">BaseIO</span></a> <span class="var token" data-binding="var-_uniq.5401" data-verso-hover="240">m</span>]
  (<span class="var token" data-binding="var-_uniq.5405" data-verso-hover="3274">condvar</span> : <a href="IO/Tasks-and-Threads/#Std___Condvar"><span class="const token" data-binding="const-Std.Condvar" data-verso-hover="3275">Std.Condvar</span></a>)
  (<span class="var token" data-binding="var-_uniq.5406" data-verso-hover="3278">mutex</span> : <span class="const token" data-binding="const-Std.BaseMutex" data-verso-hover="3279">Std.BaseMutex</span>)
  (<span class="var token" data-binding="var-_uniq.5407" data-verso-hover="2833">pred</span> : <span class="var token" data-binding="var-_uniq.5401" data-verso-hover="240">m</span> <a href="Basic-Types/Booleans/#Bool___false"><span class="const token" data-binding="const-Bool" data-verso-hover="155">Bool</span></a>) : <span class="var token" data-binding="var-_uniq.5401" data-verso-hover="240">m</span> <a href="Basic-Types/The-Unit-Type/#Unit"><span class="const token" data-binding="const-Unit" data-verso-hover="3">Unit</span></a></div></pre><div class="text">
                    <p>
                      Waits on the condition variable until the predicate is true.</p>
                    </div>
                  </div>
                </section>
              </section>
            </section>
          <img referrerpolicy="no-referrer-when-downgrade" src="https://static.scarf.sh/a.png?x-pxid=11415071-5949-444a-8c93-ef0905bcd026"><nav class="prev-next-buttons">
            <a class="local-button active" href="IO/Random-Numbers/#The-Lean-Language-Reference--IO--Random-Numbers" rel="prev" title="15.10. Random Numbers"><span class="arrow">←</span><span class="where">15.10. Random Numbers</span></a><a class="local-button active" href="The-Simplifier/#the-simplifier" rel="next" title="16. The Simplifier"><span class="where">16. The Simplifier</span><span class="arrow">→</span></a></nav>
          </div>
        </main></div>
    </body>
  </html>

